<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 8 [Tutorial] Data voorbereiden | Exploratieve en Descriptieve Data Analyse</title>
  <meta name="description" content="Chapter 8 [Tutorial] Data voorbereiden | Exploratieve en Descriptieve Data Analyse" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 8 [Tutorial] Data voorbereiden | Exploratieve en Descriptieve Data Analyse" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 8 [Tutorial] Data voorbereiden | Exploratieve en Descriptieve Data Analyse" />
  
  
  

<meta name="author" content="Gert Janssenswillen, Benoît Depaire" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="lecture-notes-data-voorbereiden.html"/>
<link rel="next" href="lecture-notes-tidy-data.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Exploratieve en descriptieve data analyse</a></li>
<li><a href="https://beta.rstudioconnect.com/content/e8fdb21e-22c3-4051-b0da-c75b1f2fac2f/_rev42337/studieleidraad_worksessions.html">Studieleidraad</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Voorwoord</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#hoe-de-lecture-notes-te-gebruiken"><i class="fa fa-check"></i>Hoe de lecture notes te gebruiken</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#hoe-de-tutorials-te-gebruiken"><i class="fa fa-check"></i>Hoe de tutorials te gebruiken</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#over-de-auteurs"><i class="fa fa-check"></i>Over de auteurs</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#disclaimer"><i class="fa fa-check"></i>Disclaimer</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="lecture-notes-introductiecollege.html"><a href="lecture-notes-introductiecollege.html"><i class="fa fa-check"></i><b>1</b> [Lecture notes] Introductiecollege</a>
<ul>
<li class="chapter" data-level="1.1" data-path="lecture-notes-introductiecollege.html"><a href="lecture-notes-introductiecollege.html#data-science"><i class="fa fa-check"></i><b>1.1</b> Data science?</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="lecture-notes-introductiecollege.html"><a href="lecture-notes-introductiecollege.html#verschillende-soorten-van-data-analyse"><i class="fa fa-check"></i><b>1.1.1</b> Verschillende soorten van data analyse</a></li>
<li class="chapter" data-level="1.1.2" data-path="lecture-notes-introductiecollege.html"><a href="lecture-notes-introductiecollege.html#rol-van-data-in-de-bedrijfswereld"><i class="fa fa-check"></i><b>1.1.2</b> Rol van data in de bedrijfswereld</a></li>
<li class="chapter" data-level="1.1.3" data-path="lecture-notes-introductiecollege.html"><a href="lecture-notes-introductiecollege.html#data-revoluties"><i class="fa fa-check"></i><b>1.1.3</b> Data revoluties</a></li>
<li class="chapter" data-level="1.1.4" data-path="lecture-notes-introductiecollege.html"><a href="lecture-notes-introductiecollege.html#data-explosion"><i class="fa fa-check"></i><b>1.1.4</b> Data explosion</a></li>
<li class="chapter" data-level="1.1.5" data-path="lecture-notes-introductiecollege.html"><a href="lecture-notes-introductiecollege.html#waarover-verzamelen-bedrijven-data"><i class="fa fa-check"></i><b>1.1.5</b> Waarover verzamelen bedrijven data</a></li>
<li class="chapter" data-level="1.1.6" data-path="lecture-notes-introductiecollege.html"><a href="lecture-notes-introductiecollege.html#van-data-tot-actionable-insights"><i class="fa fa-check"></i><b>1.1.6</b> Van data tot ‘actionable insights’</a></li>
<li class="chapter" data-level="1.1.7" data-path="lecture-notes-introductiecollege.html"><a href="lecture-notes-introductiecollege.html#data-scientists"><i class="fa fa-check"></i><b>1.1.7</b> Data Scientists</a></li>
<li class="chapter" data-level="1.1.8" data-path="lecture-notes-introductiecollege.html"><a href="lecture-notes-introductiecollege.html#de-kunst-van-data-analyse"><i class="fa fa-check"></i><b>1.1.8</b> De kunst van data analyse</a></li>
<li class="chapter" data-level="1.1.9" data-path="lecture-notes-introductiecollege.html"><a href="lecture-notes-introductiecollege.html#de-kracht-van-descriptieve-en-exploratieve-data-analyse"><i class="fa fa-check"></i><b>1.1.9</b> De kracht van descriptieve en exploratieve data analyse</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="lecture-notes-introductiecollege.html"><a href="lecture-notes-introductiecollege.html#data-data-types"><i class="fa fa-check"></i><b>1.2</b> Data &amp; Data types</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="lecture-notes-introductiecollege.html"><a href="lecture-notes-introductiecollege.html#dataset"><i class="fa fa-check"></i><b>1.2.1</b> Dataset</a></li>
<li class="chapter" data-level="1.2.2" data-path="lecture-notes-introductiecollege.html"><a href="lecture-notes-introductiecollege.html#klassieke-datatypologie"><i class="fa fa-check"></i><b>1.2.2</b> Klassieke datatypologie</a></li>
<li class="chapter" data-level="1.2.3" data-path="lecture-notes-introductiecollege.html"><a href="lecture-notes-introductiecollege.html#de-klassieke-datatypologie-is-misleidend"><i class="fa fa-check"></i><b>1.2.3</b> De klassieke datatypologie is misleidend</a></li>
<li class="chapter" data-level="1.2.4" data-path="lecture-notes-introductiecollege.html"><a href="lecture-notes-introductiecollege.html#alternatieve-datatypologie"><i class="fa fa-check"></i><b>1.2.4</b> Alternatieve datatypologie</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="lecture-notes-introductiecollege.html"><a href="lecture-notes-introductiecollege.html#referenties"><i class="fa fa-check"></i><b>1.3</b> Referenties</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="lecture-notes-data-visualizatie.html"><a href="lecture-notes-data-visualizatie.html"><i class="fa fa-check"></i><b>2</b> [Lecture notes] Data visualizatie</a>
<ul>
<li class="chapter" data-level="2.1" data-path="lecture-notes-data-visualizatie.html"><a href="lecture-notes-data-visualizatie.html#univariate-visualisaties-1-variabele"><i class="fa fa-check"></i><b>2.1</b> Univariate visualisaties (1 variabele)</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="lecture-notes-data-visualizatie.html"><a href="lecture-notes-data-visualizatie.html#categorische-variabele"><i class="fa fa-check"></i><b>2.1.1</b> Categorische variabele</a></li>
<li class="chapter" data-level="2.1.2" data-path="lecture-notes-data-visualizatie.html"><a href="lecture-notes-data-visualizatie.html#continue-variabele"><i class="fa fa-check"></i><b>2.1.2</b> Continue variabele</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="lecture-notes-data-visualizatie.html"><a href="lecture-notes-data-visualizatie.html#bivariate-visualisatie-2-variabelen"><i class="fa fa-check"></i><b>2.2</b> Bivariate visualisatie (2 variabelen)</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="lecture-notes-data-visualizatie.html"><a href="lecture-notes-data-visualizatie.html#situatie-1-de-onafhankelijke-variabele-is-categorisch"><i class="fa fa-check"></i><b>2.2.1</b> Situatie 1: De onafhankelijke variabele is categorisch</a></li>
<li class="chapter" data-level="2.2.2" data-path="lecture-notes-data-visualizatie.html"><a href="lecture-notes-data-visualizatie.html#situatie-2-de-onafhankelijke-variabele-is-continue"><i class="fa fa-check"></i><b>2.2.2</b> Situatie 2: De onafhankelijke variabele is continue</a></li>
<li class="chapter" data-level="2.2.3" data-path="lecture-notes-data-visualizatie.html"><a href="lecture-notes-data-visualizatie.html#situatie-3-de-onafhankelijke-variabele-is-tijd"><i class="fa fa-check"></i><b>2.2.3</b> Situatie 3: De onafhankelijke variabele is tijd</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="lecture-notes-data-visualizatie.html"><a href="lecture-notes-data-visualizatie.html#multivariate-visualisaties-meer-dan-2-variabelen"><i class="fa fa-check"></i><b>2.3</b> Multivariate visualisaties (meer dan 2 variabelen)</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="lecture-notes-data-visualizatie.html"><a href="lecture-notes-data-visualizatie.html#voorbeeld-in-welke-mate-hangt-de-vertrek-vertraging-af-van-de-luchthaven-en-de-afstand"><i class="fa fa-check"></i><b>2.3.1</b> Voorbeeld: In welke mate hangt de vertrek vertraging af van de luchthaven en de afstand?</a></li>
<li class="chapter" data-level="2.3.2" data-path="lecture-notes-data-visualizatie.html"><a href="lecture-notes-data-visualizatie.html#voorbeeld-multivariaat-tijd"><i class="fa fa-check"></i><b>2.3.2</b> Voorbeeld: multivariaat tijd</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="lecture-notes-data-visualizatie.html"><a href="lecture-notes-data-visualizatie.html#visualisaties-voor-communicatie"><i class="fa fa-check"></i><b>2.4</b> Visualisaties voor communicatie</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="lecture-notes-data-visualizatie.html"><a href="lecture-notes-data-visualizatie.html#voorbeeld-voor-goed-voor-exploratie"><i class="fa fa-check"></i><b>2.4.1</b> Voorbeeld: voor ~ goed voor exploratie</a></li>
<li class="chapter" data-level="2.4.2" data-path="lecture-notes-data-visualizatie.html"><a href="lecture-notes-data-visualizatie.html#voorbeeld-na-goed-voor-communicatie"><i class="fa fa-check"></i><b>2.4.2</b> Voorbeeld: na ~ goed voor communicatie</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="lecture-notes-data-visualizatie.html"><a href="lecture-notes-data-visualizatie.html#how-charts-lie"><i class="fa fa-check"></i><b>2.5</b> How charts lie</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="lecture-notes-data-visualizatie.html"><a href="lecture-notes-data-visualizatie.html#causaliteit-vs-correlatie"><i class="fa fa-check"></i><b>2.5.1</b> Causaliteit vs correlatie</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="lecture-notes-data-visualizatie.html"><a href="lecture-notes-data-visualizatie.html#referenties-1"><i class="fa fa-check"></i><b>2.6</b> Referenties</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tutorial-data-visualisatie.html"><a href="tutorial-data-visualisatie.html"><i class="fa fa-check"></i><b>3</b> [Tutorial] Data visualisatie</a>
<ul>
<li class="chapter" data-level="3.1" data-path="tutorial-data-visualisatie.html"><a href="tutorial-data-visualisatie.html#voor-je-begint"><i class="fa fa-check"></i><b>3.1</b> Voor je begint</a></li>
<li class="chapter" data-level="3.2" data-path="tutorial-data-visualisatie.html"><a href="tutorial-data-visualisatie.html#introductie"><i class="fa fa-check"></i><b>3.2</b> Introductie</a></li>
<li class="chapter" data-level="3.3" data-path="tutorial-data-visualisatie.html"><a href="tutorial-data-visualisatie.html#verschillende-geometrics"><i class="fa fa-check"></i><b>3.3</b> Verschillende geometrics</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="tutorial-data-visualisatie.html"><a href="tutorial-data-visualisatie.html#geom_point"><i class="fa fa-check"></i><b>3.3.1</b> geom_point</a></li>
<li class="chapter" data-level="3.3.2" data-path="tutorial-data-visualisatie.html"><a href="tutorial-data-visualisatie.html#geom_histogram"><i class="fa fa-check"></i><b>3.3.2</b> geom_histogram</a></li>
<li class="chapter" data-level="3.3.3" data-path="tutorial-data-visualisatie.html"><a href="tutorial-data-visualisatie.html#geom_boxplot"><i class="fa fa-check"></i><b>3.3.3</b> geom_boxplot</a></li>
<li class="chapter" data-level="3.3.4" data-path="tutorial-data-visualisatie.html"><a href="tutorial-data-visualisatie.html#geom_violin"><i class="fa fa-check"></i><b>3.3.4</b> geom_violin</a></li>
<li class="chapter" data-level="3.3.5" data-path="tutorial-data-visualisatie.html"><a href="tutorial-data-visualisatie.html#geom_bar"><i class="fa fa-check"></i><b>3.3.5</b> geom_bar</a></li>
<li class="chapter" data-level="3.3.6" data-path="tutorial-data-visualisatie.html"><a href="tutorial-data-visualisatie.html#geom_col"><i class="fa fa-check"></i><b>3.3.6</b> geom_col</a></li>
<li class="chapter" data-level="3.3.7" data-path="tutorial-data-visualisatie.html"><a href="tutorial-data-visualisatie.html#other-geometrics"><i class="fa fa-check"></i><b>3.3.7</b> Other geometrics</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="tutorial-data-visualisatie.html"><a href="tutorial-data-visualisatie.html#layout-van-onze-grafieken-verbeteren"><i class="fa fa-check"></i><b>3.4</b> Layout van onze grafieken verbeteren</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="tutorial-data-visualisatie.html"><a href="tutorial-data-visualisatie.html#titels"><i class="fa fa-check"></i><b>3.4.1</b> Titels</a></li>
<li class="chapter" data-level="3.4.2" data-path="tutorial-data-visualisatie.html"><a href="tutorial-data-visualisatie.html#theme"><i class="fa fa-check"></i><b>3.4.2</b> Theme</a></li>
<li class="chapter" data-level="3.4.3" data-path="tutorial-data-visualisatie.html"><a href="tutorial-data-visualisatie.html#het-coördinatenstelsel"><i class="fa fa-check"></i><b>3.4.3</b> Het coördinatenstelsel</a></li>
<li class="chapter" data-level="3.4.4" data-path="tutorial-data-visualisatie.html"><a href="tutorial-data-visualisatie.html#color-scales"><i class="fa fa-check"></i><b>3.4.4</b> Color scales</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="tutorial-data-visualisatie.html"><a href="tutorial-data-visualisatie.html#geavanceerde-plots"><i class="fa fa-check"></i><b>3.5</b> Geavanceerde plots</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="tutorial-data-visualisatie.html"><a href="tutorial-data-visualisatie.html#gebruikmaken-van-facets"><i class="fa fa-check"></i><b>3.5.1</b> Gebruikmaken van Facets</a></li>
<li class="chapter" data-level="3.5.2" data-path="tutorial-data-visualisatie.html"><a href="tutorial-data-visualisatie.html#meerdere-layers-combineren"><i class="fa fa-check"></i><b>3.5.2</b> Meerdere layers combineren</a></li>
<li class="chapter" data-level="3.5.3" data-path="tutorial-data-visualisatie.html"><a href="tutorial-data-visualisatie.html#aes-overerving"><i class="fa fa-check"></i><b>3.5.3</b> Aes-overerving</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="tutorial-data-visualisatie.html"><a href="tutorial-data-visualisatie.html#background-material"><i class="fa fa-check"></i><b>3.6</b> Background material</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="lecture-notes-descriptieve-statistieken.html"><a href="lecture-notes-descriptieve-statistieken.html"><i class="fa fa-check"></i><b>4</b> [Lecture notes] Descriptieve statistieken</a>
<ul>
<li class="chapter" data-level="4.1" data-path="lecture-notes-descriptieve-statistieken.html"><a href="lecture-notes-descriptieve-statistieken.html#beschrijvende-statistieken-versus-exploratieve-plots"><i class="fa fa-check"></i><b>4.1</b> Beschrijvende statistieken versus exploratieve plots</a></li>
<li class="chapter" data-level="4.2" data-path="lecture-notes-descriptieve-statistieken.html"><a href="lecture-notes-descriptieve-statistieken.html#notatie"><i class="fa fa-check"></i><b>4.2</b> Notatie</a></li>
<li class="chapter" data-level="4.3" data-path="lecture-notes-descriptieve-statistieken.html"><a href="lecture-notes-descriptieve-statistieken.html#data"><i class="fa fa-check"></i><b>4.3</b> Data</a></li>
<li class="chapter" data-level="4.4" data-path="lecture-notes-descriptieve-statistieken.html"><a href="lecture-notes-descriptieve-statistieken.html#univariate-statistieken"><i class="fa fa-check"></i><b>4.4</b> Univariate statistieken</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="lecture-notes-descriptieve-statistieken.html"><a href="lecture-notes-descriptieve-statistieken.html#continue-variabele-1"><i class="fa fa-check"></i><b>4.4.1</b> Continue variabele</a></li>
<li class="chapter" data-level="" data-path="lecture-notes-descriptieve-statistieken.html"><a href="lecture-notes-descriptieve-statistieken.html#centrummaten"><i class="fa fa-check"></i>Centrummaten</a></li>
<li class="chapter" data-level="" data-path="lecture-notes-descriptieve-statistieken.html"><a href="lecture-notes-descriptieve-statistieken.html#spreidingsmaten"><i class="fa fa-check"></i>Spreidingsmaten</a></li>
<li class="chapter" data-level="4.4.2" data-path="lecture-notes-descriptieve-statistieken.html"><a href="lecture-notes-descriptieve-statistieken.html#categorische-variabele-1"><i class="fa fa-check"></i><b>4.4.2</b> Categorische variabele</a></li>
<li class="chapter" data-level="" data-path="lecture-notes-descriptieve-statistieken.html"><a href="lecture-notes-descriptieve-statistieken.html#frequentietabel"><i class="fa fa-check"></i>Frequentietabel</a></li>
<li class="chapter" data-level="" data-path="lecture-notes-descriptieve-statistieken.html"><a href="lecture-notes-descriptieve-statistieken.html#centrummaten-1"><i class="fa fa-check"></i>Centrummaten</a></li>
<li class="chapter" data-level="" data-path="lecture-notes-descriptieve-statistieken.html"><a href="lecture-notes-descriptieve-statistieken.html#spreidingsmaten-1"><i class="fa fa-check"></i>Spreidingsmaten</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="lecture-notes-descriptieve-statistieken.html"><a href="lecture-notes-descriptieve-statistieken.html#bivariate-statistieken"><i class="fa fa-check"></i><b>4.5</b> Bivariate statistieken</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="lecture-notes-descriptieve-statistieken.html"><a href="lecture-notes-descriptieve-statistieken.html#categorisch-versus-categorisch"><i class="fa fa-check"></i><b>4.5.1</b> Categorisch versus Categorisch</a></li>
<li class="chapter" data-level="" data-path="lecture-notes-descriptieve-statistieken.html"><a href="lecture-notes-descriptieve-statistieken.html#univariate-statistieken-per-categoriewaarde"><i class="fa fa-check"></i>Univariate statistieken per categoriewaarde</a></li>
<li class="chapter" data-level="" data-path="lecture-notes-descriptieve-statistieken.html"><a href="lecture-notes-descriptieve-statistieken.html#contingentietabellen"><i class="fa fa-check"></i>Contingentietabellen</a></li>
<li class="chapter" data-level="4.5.2" data-path="lecture-notes-descriptieve-statistieken.html"><a href="lecture-notes-descriptieve-statistieken.html#categorisch-versus-continu"><i class="fa fa-check"></i><b>4.5.2</b> Categorisch versus Continu</a></li>
<li class="chapter" data-level="" data-path="lecture-notes-descriptieve-statistieken.html"><a href="lecture-notes-descriptieve-statistieken.html#univariate-statistieken-per-categoriewaarde-1"><i class="fa fa-check"></i>Univariate statistieken per categoriewaarde</a></li>
<li class="chapter" data-level="" data-path="lecture-notes-descriptieve-statistieken.html"><a href="lecture-notes-descriptieve-statistieken.html#correlatie"><i class="fa fa-check"></i>Correlatie</a></li>
<li class="chapter" data-level="4.5.3" data-path="lecture-notes-descriptieve-statistieken.html"><a href="lecture-notes-descriptieve-statistieken.html#continu-versus-continu"><i class="fa fa-check"></i><b>4.5.3</b> Continu versus Continu</a></li>
<li class="chapter" data-level="" data-path="lecture-notes-descriptieve-statistieken.html"><a href="lecture-notes-descriptieve-statistieken.html#correlatie-1"><i class="fa fa-check"></i>Correlatie</a></li>
<li class="chapter" data-level="" data-path="lecture-notes-descriptieve-statistieken.html"><a href="lecture-notes-descriptieve-statistieken.html#vergelijking-correlatiecoëfficiënten"><i class="fa fa-check"></i>Vergelijking correlatiecoëfficiënten</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lecture-notes-descriptieve-statistieken.html"><a href="lecture-notes-descriptieve-statistieken.html#referenties-2"><i class="fa fa-check"></i>Referenties</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="tutorial-descriptieve-statistieken.html"><a href="tutorial-descriptieve-statistieken.html"><i class="fa fa-check"></i><b>5</b> [Tutorial] Descriptieve statistieken</a>
<ul>
<li class="chapter" data-level="5.1" data-path="tutorial-descriptieve-statistieken.html"><a href="tutorial-descriptieve-statistieken.html#voor-je-begint-1"><i class="fa fa-check"></i><b>5.1</b> Voor je begint</a></li>
<li class="chapter" data-level="5.2" data-path="tutorial-descriptieve-statistieken.html"><a href="tutorial-descriptieve-statistieken.html#introductie-1"><i class="fa fa-check"></i><b>5.2</b> Introductie</a></li>
<li class="chapter" data-level="5.3" data-path="tutorial-descriptieve-statistieken.html"><a href="tutorial-descriptieve-statistieken.html#nuttige-dplyr-functies"><i class="fa fa-check"></i><b>5.3</b> Nuttige dplyr functies</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="tutorial-descriptieve-statistieken.html"><a href="tutorial-descriptieve-statistieken.html#tibbles"><i class="fa fa-check"></i><b>5.3.1</b> Tibbles</a></li>
<li class="chapter" data-level="5.3.2" data-path="tutorial-descriptieve-statistieken.html"><a href="tutorial-descriptieve-statistieken.html#glimpse"><i class="fa fa-check"></i><b>5.3.2</b> Glimpse</a></li>
<li class="chapter" data-level="5.3.3" data-path="tutorial-descriptieve-statistieken.html"><a href="tutorial-descriptieve-statistieken.html#section"><i class="fa fa-check"></i><b>5.3.3</b> %&gt;%</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="tutorial-descriptieve-statistieken.html"><a href="tutorial-descriptieve-statistieken.html#univariate-analyse-van-een-continue-variabele"><i class="fa fa-check"></i><b>5.4</b> Univariate analyse van een continue variabele</a></li>
<li class="chapter" data-level="5.5" data-path="tutorial-descriptieve-statistieken.html"><a href="tutorial-descriptieve-statistieken.html#bivariate-analysis-of-a-continuous-variable-with-respect-to-a-categorical-variable"><i class="fa fa-check"></i><b>5.5</b> Bivariate analysis of a continuous variable with respect to a categorical variable</a></li>
<li class="chapter" data-level="5.6" data-path="tutorial-descriptieve-statistieken.html"><a href="tutorial-descriptieve-statistieken.html#univariate-analyse-van-een-categorische-variabele"><i class="fa fa-check"></i><b>5.6</b> Univariate analyse van een categorische variabele</a></li>
<li class="chapter" data-level="5.7" data-path="tutorial-descriptieve-statistieken.html"><a href="tutorial-descriptieve-statistieken.html#bivariate-analyse-van-een-continue-variabele-ten-opzichte-van-een-andere-continue-variabele"><i class="fa fa-check"></i><b>5.7</b> Bivariate analyse van een continue variabele ten opzichte van een andere continue variabele</a></li>
<li class="chapter" data-level="5.8" data-path="tutorial-descriptieve-statistieken.html"><a href="tutorial-descriptieve-statistieken.html#bivariate-analyse-van-een-categorische-variabele-ten-opzichte-van-een-andere-categorische-variabele"><i class="fa fa-check"></i><b>5.8</b> Bivariate analyse van een categorische variabele ten opzichte van een andere categorische variabele</a></li>
<li class="chapter" data-level="5.9" data-path="tutorial-descriptieve-statistieken.html"><a href="tutorial-descriptieve-statistieken.html#background-material-1"><i class="fa fa-check"></i><b>5.9</b> Background material</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="lecture-notes-structuur-van-een-data-analyse-project..html"><a href="lecture-notes-structuur-van-een-data-analyse-project..html"><i class="fa fa-check"></i><b>6</b> [Lecture notes] Structuur van een data analyse project.</a></li>
<li class="chapter" data-level="7" data-path="lecture-notes-data-voorbereiden.html"><a href="lecture-notes-data-voorbereiden.html"><i class="fa fa-check"></i><b>7</b> [Lecture notes] Data voorbereiden</a>
<ul>
<li class="chapter" data-level="7.1" data-path="lecture-notes-data-voorbereiden.html"><a href="lecture-notes-data-voorbereiden.html#beginnen-bij-het-begin"><i class="fa fa-check"></i><b>7.1</b> Beginnen bij het begin</a></li>
<li class="chapter" data-level="7.2" data-path="lecture-notes-data-voorbereiden.html"><a href="lecture-notes-data-voorbereiden.html#data-inlezen"><i class="fa fa-check"></i><b>7.2</b> Data inlezen</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="lecture-notes-data-voorbereiden.html"><a href="lecture-notes-data-voorbereiden.html#uitdagingen-bij-het-correct-inlezen-van-data"><i class="fa fa-check"></i><b>7.2.1</b> Uitdagingen bij het correct inlezen van data</a></li>
<li class="chapter" data-level="7.2.2" data-path="lecture-notes-data-voorbereiden.html"><a href="lecture-notes-data-voorbereiden.html#dataformaten"><i class="fa fa-check"></i><b>7.2.2</b> Dataformaten</a></li>
<li class="chapter" data-level="7.2.3" data-path="lecture-notes-data-voorbereiden.html"><a href="lecture-notes-data-voorbereiden.html#data-encodering"><i class="fa fa-check"></i><b>7.2.3</b> Data-encodering</a></li>
<li class="chapter" data-level="7.2.4" data-path="lecture-notes-data-voorbereiden.html"><a href="lecture-notes-data-voorbereiden.html#datatypes-controlleren-en-corrigeren"><i class="fa fa-check"></i><b>7.2.4</b> Datatypes controlleren en corrigeren</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="lecture-notes-data-voorbereiden.html"><a href="lecture-notes-data-voorbereiden.html#dataproblemen-identificeren-en-corrigeren"><i class="fa fa-check"></i><b>7.3</b> Dataproblemen identificeren en corrigeren</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="lecture-notes-data-voorbereiden.html"><a href="lecture-notes-data-voorbereiden.html#overzicht"><i class="fa fa-check"></i><b>7.3.1</b> Overzicht</a></li>
<li class="chapter" data-level="7.3.2" data-path="lecture-notes-data-voorbereiden.html"><a href="lecture-notes-data-voorbereiden.html#foutieve-waarden"><i class="fa fa-check"></i><b>7.3.2</b> Foutieve waarden</a></li>
<li class="chapter" data-level="7.3.3" data-path="lecture-notes-data-voorbereiden.html"><a href="lecture-notes-data-voorbereiden.html#ontbrekende-waarden"><i class="fa fa-check"></i><b>7.3.3</b> Ontbrekende waarden</a></li>
<li class="chapter" data-level="7.3.4" data-path="lecture-notes-data-voorbereiden.html"><a href="lecture-notes-data-voorbereiden.html#inconsistente-waarden"><i class="fa fa-check"></i><b>7.3.4</b> Inconsistente waarden</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="lecture-notes-data-voorbereiden.html"><a href="lecture-notes-data-voorbereiden.html#data-opwaarderen"><i class="fa fa-check"></i><b>7.4</b> Data opwaarderen</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="lecture-notes-data-voorbereiden.html"><a href="lecture-notes-data-voorbereiden.html#sampling"><i class="fa fa-check"></i><b>7.4.1</b> Sampling</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lecture-notes-data-voorbereiden.html"><a href="lecture-notes-data-voorbereiden.html#referenties-3"><i class="fa fa-check"></i>Referenties</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="tutorial-data-voorbereiden.html"><a href="tutorial-data-voorbereiden.html"><i class="fa fa-check"></i><b>8</b> [Tutorial] Data voorbereiden</a>
<ul>
<li class="chapter" data-level="8.1" data-path="tutorial-data-voorbereiden.html"><a href="tutorial-data-voorbereiden.html#voor-je-begint-2"><i class="fa fa-check"></i><b>8.1</b> Voor je begint</a></li>
<li class="chapter" data-level="8.2" data-path="tutorial-data-voorbereiden.html"><a href="tutorial-data-voorbereiden.html#inleiding"><i class="fa fa-check"></i><b>8.2</b> Inleiding</a></li>
<li class="chapter" data-level="8.3" data-path="tutorial-data-voorbereiden.html"><a href="tutorial-data-voorbereiden.html#gegevens-lezen"><i class="fa fa-check"></i><b>8.3</b> Gegevens lezen</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="tutorial-data-voorbereiden.html"><a href="tutorial-data-voorbereiden.html#csv-and-tsv"><i class="fa fa-check"></i><b>8.3.1</b> CSV and TSV</a></li>
<li class="chapter" data-level="8.3.2" data-path="tutorial-data-voorbereiden.html"><a href="tutorial-data-voorbereiden.html#excel"><i class="fa fa-check"></i><b>8.3.2</b> Excel</a></li>
<li class="chapter" data-level="8.3.3" data-path="tutorial-data-voorbereiden.html"><a href="tutorial-data-voorbereiden.html#json-en-xml"><i class="fa fa-check"></i><b>8.3.3</b> JSON en XML</a></li>
<li class="chapter" data-level="8.3.4" data-path="tutorial-data-voorbereiden.html"><a href="tutorial-data-voorbereiden.html#andere-statistische-pakketten"><i class="fa fa-check"></i><b>8.3.4</b> Andere statistische pakketten</a></li>
<li class="chapter" data-level="8.3.5" data-path="tutorial-data-voorbereiden.html"><a href="tutorial-data-voorbereiden.html#databases"><i class="fa fa-check"></i><b>8.3.5</b> Databases</a></li>
<li class="chapter" data-level="8.3.6" data-path="tutorial-data-voorbereiden.html"><a href="tutorial-data-voorbereiden.html#achtergrond-materiaal"><i class="fa fa-check"></i><b>8.3.6</b> Achtergrond materiaal</a></li>
<li class="chapter" data-level="8.3.7" data-path="tutorial-data-voorbereiden.html"><a href="tutorial-data-voorbereiden.html#variabelen-omzetten"><i class="fa fa-check"></i><b>8.3.7</b> Variabelen omzetten</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="tutorial-data-voorbereiden.html"><a href="tutorial-data-voorbereiden.html#cleaning-data"><i class="fa fa-check"></i><b>8.4</b> Cleaning Data</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="tutorial-data-voorbereiden.html"><a href="tutorial-data-voorbereiden.html#dubbele-observaties"><i class="fa fa-check"></i><b>8.4.1</b> Dubbele observaties</a></li>
<li class="chapter" data-level="8.4.2" data-path="tutorial-data-voorbereiden.html"><a href="tutorial-data-voorbereiden.html#cleaning-categorische-variabelen"><i class="fa fa-check"></i><b>8.4.2</b> Cleaning categorische variabelen</a></li>
<li class="chapter" data-level="8.4.3" data-path="tutorial-data-voorbereiden.html"><a href="tutorial-data-voorbereiden.html#cleaning-continue-variabelen"><i class="fa fa-check"></i><b>8.4.3</b> Cleaning continue variabelen</a></li>
<li class="chapter" data-level="8.4.4" data-path="tutorial-data-voorbereiden.html"><a href="tutorial-data-voorbereiden.html#data-inconsistenties"><i class="fa fa-check"></i><b>8.4.4</b> Data inconsistenties</a></li>
<li class="chapter" data-level="8.4.5" data-path="tutorial-data-voorbereiden.html"><a href="tutorial-data-voorbereiden.html#missing-values"><i class="fa fa-check"></i><b>8.4.5</b> Missing values</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="tutorial-data-voorbereiden.html"><a href="tutorial-data-voorbereiden.html#data-transformatie"><i class="fa fa-check"></i><b>8.5</b> Data transformatie</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="tutorial-data-voorbereiden.html"><a href="tutorial-data-voorbereiden.html#discretisern-van-continue-variablen"><i class="fa fa-check"></i><b>8.5.1</b> Discretisern van continue variablen</a></li>
<li class="chapter" data-level="8.5.2" data-path="tutorial-data-voorbereiden.html"><a href="tutorial-data-voorbereiden.html#herschalen-van-continue-variablen"><i class="fa fa-check"></i><b>8.5.2</b> Herschalen van continue variablen</a></li>
<li class="chapter" data-level="8.5.3" data-path="tutorial-data-voorbereiden.html"><a href="tutorial-data-voorbereiden.html#toevoegen-van-calculated-variables"><i class="fa fa-check"></i><b>8.5.3</b> Toevoegen van calculated variables</a></li>
<li class="chapter" data-level="8.5.4" data-path="tutorial-data-voorbereiden.html"><a href="tutorial-data-voorbereiden.html#factoren-transformeren"><i class="fa fa-check"></i><b>8.5.4</b> Factoren transformeren</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="tutorial-data-voorbereiden.html"><a href="tutorial-data-voorbereiden.html#data-transformaties-tijdens-data-visualizatie"><i class="fa fa-check"></i><b>8.6</b> Data transformaties tijdens data visualizatie</a></li>
<li class="chapter" data-level="8.7" data-path="tutorial-data-voorbereiden.html"><a href="tutorial-data-voorbereiden.html#achtergrondmateriaal"><i class="fa fa-check"></i><b>8.7</b> Achtergrondmateriaal</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="lecture-notes-tidy-data.html"><a href="lecture-notes-tidy-data.html"><i class="fa fa-check"></i><b>9</b> [Lecture notes] Tidy data</a>
<ul>
<li class="chapter" data-level="9.1" data-path="lecture-notes-tidy-data.html"><a href="lecture-notes-tidy-data.html#inleiding-1"><i class="fa fa-check"></i><b>9.1</b> Inleiding</a></li>
<li class="chapter" data-level="9.2" data-path="lecture-notes-tidy-data.html"><a href="lecture-notes-tidy-data.html#case-nyc-vluchten-2013"><i class="fa fa-check"></i><b>9.2</b> Case: NYC Vluchten 2013</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="lecture-notes-tidy-data.html"><a href="lecture-notes-tidy-data.html#datasets-samenvoegen"><i class="fa fa-check"></i><b>9.2.1</b> Datasets samenvoegen</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="lecture-notes-tidy-data.html"><a href="lecture-notes-tidy-data.html#data-in-een-lang-formaat-plaatsen-voor-visuele-analyses"><i class="fa fa-check"></i><b>9.3</b> Data in een lang formaat plaatsen (voor visuele analyses)</a></li>
<li class="chapter" data-level="9.4" data-path="lecture-notes-tidy-data.html"><a href="lecture-notes-tidy-data.html#data-in-een-breed-formaat-plaatsen-voor-overzichtelijke-tabellen"><i class="fa fa-check"></i><b>9.4</b> Data in een breed formaat plaatsen (voor overzichtelijke tabellen)</a></li>
<li class="chapter" data-level="9.5" data-path="lecture-notes-tidy-data.html"><a href="lecture-notes-tidy-data.html#referenties-4"><i class="fa fa-check"></i><b>9.5</b> Referenties</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="tutorial-tidy-data.html"><a href="tutorial-tidy-data.html"><i class="fa fa-check"></i><b>10</b> [Tutorial] Tidy data</a>
<ul>
<li class="chapter" data-level="10.1" data-path="tutorial-tidy-data.html"><a href="tutorial-tidy-data.html#voor-je-begint-3"><i class="fa fa-check"></i><b>10.1</b> Voor je begint</a></li>
<li class="chapter" data-level="" data-path="tutorial-tidy-data.html"><a href="tutorial-tidy-data.html#disclaimer-1"><i class="fa fa-check"></i>Disclaimer</a></li>
<li class="chapter" data-level="10.2" data-path="tutorial-tidy-data.html"><a href="tutorial-tidy-data.html#data-samenvoegen"><i class="fa fa-check"></i><b>10.2</b> Data samenvoegen</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="tutorial-tidy-data.html"><a href="tutorial-tidy-data.html#joining-data"><i class="fa fa-check"></i><b>10.2.1</b> Joining data</a></li>
<li class="chapter" data-level="10.2.2" data-path="tutorial-tidy-data.html"><a href="tutorial-tidy-data.html#inner-join"><i class="fa fa-check"></i><b>10.2.2</b> Inner join</a></li>
<li class="chapter" data-level="10.2.3" data-path="tutorial-tidy-data.html"><a href="tutorial-tidy-data.html#left-join"><i class="fa fa-check"></i><b>10.2.3</b> Left join</a></li>
<li class="chapter" data-level="10.2.4" data-path="tutorial-tidy-data.html"><a href="tutorial-tidy-data.html#right-join"><i class="fa fa-check"></i><b>10.2.4</b> Right join</a></li>
<li class="chapter" data-level="10.2.5" data-path="tutorial-tidy-data.html"><a href="tutorial-tidy-data.html#full-join"><i class="fa fa-check"></i><b>10.2.5</b> Full join</a></li>
<li class="chapter" data-level="10.2.6" data-path="tutorial-tidy-data.html"><a href="tutorial-tidy-data.html#duplicates"><i class="fa fa-check"></i><b>10.2.6</b> Duplicates</a></li>
<li class="chapter" data-level="10.2.7" data-path="tutorial-tidy-data.html"><a href="tutorial-tidy-data.html#een-voorbeeld"><i class="fa fa-check"></i><b>10.2.7</b> Een voorbeeld</a></li>
<li class="chapter" data-level="10.2.8" data-path="tutorial-tidy-data.html"><a href="tutorial-tidy-data.html#binding-data"><i class="fa fa-check"></i><b>10.2.8</b> Binding data</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="tutorial-tidy-data.html"><a href="tutorial-tidy-data.html#transforming-data"><i class="fa fa-check"></i><b>10.3</b> Transforming data</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="tutorial-tidy-data.html"><a href="tutorial-tidy-data.html#unite-variables"><i class="fa fa-check"></i><b>10.3.1</b> Unite variables</a></li>
<li class="chapter" data-level="10.3.2" data-path="tutorial-tidy-data.html"><a href="tutorial-tidy-data.html#separate-variables"><i class="fa fa-check"></i><b>10.3.2</b> Separate variables</a></li>
<li class="chapter" data-level="10.3.3" data-path="tutorial-tidy-data.html"><a href="tutorial-tidy-data.html#spread-data"><i class="fa fa-check"></i><b>10.3.3</b> Spread data</a></li>
<li class="chapter" data-level="10.3.4" data-path="tutorial-tidy-data.html"><a href="tutorial-tidy-data.html#gather-data"><i class="fa fa-check"></i><b>10.3.4</b> Gather data</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="tutorial-tidy-data.html"><a href="tutorial-tidy-data.html#case-study-who"><i class="fa fa-check"></i><b>10.4</b> [Case study]: WHO</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="lecture-notes-tijdsdata.html"><a href="lecture-notes-tijdsdata.html"><i class="fa fa-check"></i><b>11</b> [Lecture notes] Tijdsdata</a>
<ul>
<li class="chapter" data-level="11.1" data-path="lecture-notes-tijdsdata.html"><a href="lecture-notes-tijdsdata.html#inleiding-2"><i class="fa fa-check"></i><b>11.1</b> Inleiding</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="lecture-notes-tijdsdata.html"><a href="lecture-notes-tijdsdata.html#tijdstippen-versus-periodes"><i class="fa fa-check"></i><b>11.1.1</b> Tijdstippen versus periodes</a></li>
<li class="chapter" data-level="11.1.2" data-path="lecture-notes-tijdsdata.html"><a href="lecture-notes-tijdsdata.html#afronden-van-tijdstippen"><i class="fa fa-check"></i><b>11.1.2</b> Afronden van tijdstippen</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="lecture-notes-tijdsdata.html"><a href="lecture-notes-tijdsdata.html#periode-data"><i class="fa fa-check"></i><b>11.2</b> Periode-data</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="lecture-notes-tijdsdata.html"><a href="lecture-notes-tijdsdata.html#interval-1"><i class="fa fa-check"></i><b>11.2.1</b> Interval</a></li>
<li class="chapter" data-level="11.2.2" data-path="lecture-notes-tijdsdata.html"><a href="lecture-notes-tijdsdata.html#duration"><i class="fa fa-check"></i><b>11.2.2</b> Duration</a></li>
<li class="chapter" data-level="11.2.3" data-path="lecture-notes-tijdsdata.html"><a href="lecture-notes-tijdsdata.html#period"><i class="fa fa-check"></i><b>11.2.3</b> Period</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="lecture-notes-tijdsdata.html"><a href="lecture-notes-tijdsdata.html#analyseren-van-tijdgerelateerde-data"><i class="fa fa-check"></i><b>11.3</b> Analyseren van tijdgerelateerde data</a></li>
<li class="chapter" data-level="11.4" data-path="lecture-notes-tijdsdata.html"><a href="lecture-notes-tijdsdata.html#referenties-5"><i class="fa fa-check"></i><b>11.4</b> Referenties</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="tutorial-tijdsdata.html"><a href="tutorial-tijdsdata.html"><i class="fa fa-check"></i><b>12</b> [Tutorial] Tijdsdata</a>
<ul>
<li class="chapter" data-level="12.1" data-path="tutorial-tijdsdata.html"><a href="tutorial-tijdsdata.html#voor-we-beginnen"><i class="fa fa-check"></i><b>12.1</b> Voor we beginnen</a></li>
<li class="chapter" data-level="12.2" data-path="tutorial-tijdsdata.html"><a href="tutorial-tijdsdata.html#introduction"><i class="fa fa-check"></i><b>12.2</b> Introduction</a></li>
<li class="chapter" data-level="12.3" data-path="tutorial-tijdsdata.html"><a href="tutorial-tijdsdata.html#whats-in-a-date"><i class="fa fa-check"></i><b>12.3</b> What’s in a date?</a></li>
<li class="chapter" data-level="12.4" data-path="tutorial-tijdsdata.html"><a href="tutorial-tijdsdata.html#theres-always-time"><i class="fa fa-check"></i><b>12.4</b> There’s always time</a></li>
<li class="chapter" data-level="12.5" data-path="tutorial-tijdsdata.html"><a href="tutorial-tijdsdata.html#my-time-is-not-your-time"><i class="fa fa-check"></i><b>12.5</b> My time is not your time</a></li>
<li class="chapter" data-level="12.6" data-path="tutorial-tijdsdata.html"><a href="tutorial-tijdsdata.html#extract-information-from-dates"><i class="fa fa-check"></i><b>12.6</b> Extract information from dates</a></li>
<li class="chapter" data-level="12.7" data-path="tutorial-tijdsdata.html"><a href="tutorial-tijdsdata.html#time-differences"><i class="fa fa-check"></i><b>12.7</b> Time differences</a>
<ul>
<li class="chapter" data-level="12.7.1" data-path="tutorial-tijdsdata.html"><a href="tutorial-tijdsdata.html#period-1"><i class="fa fa-check"></i><b>12.7.1</b> Period</a></li>
<li class="chapter" data-level="12.7.2" data-path="tutorial-tijdsdata.html"><a href="tutorial-tijdsdata.html#durations"><i class="fa fa-check"></i><b>12.7.2</b> Durations</a></li>
<li class="chapter" data-level="12.7.3" data-path="tutorial-tijdsdata.html"><a href="tutorial-tijdsdata.html#periods-are-not-durations"><i class="fa fa-check"></i><b>12.7.3</b> Periods are not durations</a></li>
</ul></li>
<li class="chapter" data-level="12.8" data-path="tutorial-tijdsdata.html"><a href="tutorial-tijdsdata.html#arithmetics"><i class="fa fa-check"></i><b>12.8</b> Arithmetics</a></li>
<li class="chapter" data-level="12.9" data-path="tutorial-tijdsdata.html"><a href="tutorial-tijdsdata.html#interval-2"><i class="fa fa-check"></i><b>12.9</b> Interval</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Exploratieve en Descriptieve Data Analyse</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tutorial-data-voorbereiden" class="section level1" number="8">
<h1><span class="header-section-number">Chapter 8</span> [Tutorial] Data voorbereiden</h1>
<div id="voor-je-begint-2" class="section level2" number="8.1">
<h2><span class="header-section-number">8.1</span> Voor je begint</h2>
<p>Tijdens deze tutorial zullen we verschillende r-pakketten gebru., indien nodig.</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="tutorial-data-voorbereiden.html#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb144-2"><a href="tutorial-data-voorbereiden.html#cb144-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb144-3"><a href="tutorial-data-voorbereiden.html#cb144-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb144-4"><a href="tutorial-data-voorbereiden.html#cb144-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mice)</span></code></pre></div>
<p>Het <code>forcats</code> pakket bevat een serie functies om op eenvoudige wijze factoren te manipuleren (waarvan <em>forcats</em> een anagram is). Het <code>mice</code> pakket kan worden gebruikt om het voorkomen van ontbrekende waarden te analyseren (<em>MICE</em> staat voor <em>Multiple Imputation by Chained Equations</em>, verwijzend naar een techniek om ontbrekende waarden te schatten).</p>
<p>We gaan er ook van uit dat je bekend bent met de inhoud van onze <code>ggplot2</code> en <code>dplyr</code> tutorial. Je kunt de survey<a href="#fn26" class="footnote-ref" id="fnref26"><sup>26</sup></a> dataset laden die bij deze tutorial wordt geleverd als je zelf dingen wilt uitproberen.[^try]</p>
<p>Als je het zelf wilt proberen, volg dan stap voor stap de tutorial. Het incrementele karakter van het cleaning- en transformatieproces staat niet toe om delen van deze tutorial geïsoleerd uit te voeren.</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="tutorial-data-voorbereiden.html#cb145-1" aria-hidden="true" tabindex="-1"></a>survey <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;survey.RDS&quot;</span>)</span>
<span id="cb145-2"><a href="tutorial-data-voorbereiden.html#cb145-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(survey)</span></code></pre></div>
<pre><code>## Rows: 21,483
## Columns: 9
## $ year    &lt;chr&gt; &quot;2000&quot;, &quot;2000&quot;, &quot;2000&quot;, &quot;2000&quot;, &quot;2000&quot;, &quot;2000&quot;, &quot;2000&quot;, &quot;2000&quot;~
## $ marital &lt;chr&gt; &quot;Never married&quot;, &quot;Divorced&quot;, &quot;Widowed&quot;, &quot;Never married&quot;, &quot;Divo~
## $ age     &lt;chr&gt; &quot;26&quot;, &quot;48&quot;, &quot;67&quot;, &quot;39&quot;, &quot;25&quot;, &quot;25&quot;, &quot;36&quot;, &quot;44&quot;, &quot;44&quot;, &quot;47&quot;, &quot;5~
## $ race    &lt;chr&gt; &quot;White&quot;, &quot;White&quot;, &quot;White&quot;, &quot;White&quot;, &quot;White&quot;, &quot;White&quot;, &quot;White&quot;,~
## $ rincome &lt;chr&gt; &quot;$8000 to 9999&quot;, &quot;$8000 to 9999&quot;, &quot;Not applicable&quot;, &quot;Not appli~
## $ partyid &lt;chr&gt; &quot;Ind,near rep&quot;, &quot;Not str republican&quot;, &quot;Independent&quot;, &quot;Ind,near~
## $ relig   &lt;chr&gt; &quot;Protestant&quot;, &quot;Protestant&quot;, &quot;Protestant&quot;, &quot;Orthodox-christian&quot;~
## $ denom   &lt;chr&gt; &quot;Southern baptist&quot;, &quot;Baptist-dk which&quot;, &quot;No denomination&quot;, &quot;No~
## $ tvhours &lt;chr&gt; &quot;12&quot;, NA, &quot;2&quot;, &quot;4&quot;, &quot;1&quot;, NA, &quot;3&quot;, NA, &quot;0&quot;, &quot;3&quot;, &quot;2&quot;, NA, &quot;1&quot;, ~</code></pre>
</div>
<div id="inleiding" class="section level2" number="8.2">
<h2><span class="header-section-number">8.2</span> Inleiding</h2>
<p>Deze tutorial over schoonmaken en transformeren is verdeeld in drie verschillende secties.</p>
<ul>
<li>Lezen</li>
<li>Schoonmaken</li>
<li>Transformeren</li>
</ul>
<p><strong>Data import </strong>. De eerste taak is het inlezen van de gegevens in een bepaald formaat in R. Hoewel we dit onderwerp niet uitgebreid zullen behandelen, geven we wel nuttige verwijzingen naar geschikte R-pakketten om dit te doen.</p>
<p><strong>Data cleaning</strong>. We <em>cleanen</em> de gegevens door: fouten, duplicaten, enz. te verwijderen.</p>
<p><strong>Data Transformation</strong>. Hier richten we ons niet op het verwijderen van fouten en inconsistenties, maar proberen we de gegevens gemakkelijker analyseerbaar te maken: discrete representaties maken van continue variabelen, berekende variabelen toevoegen, of de labels van categorische variabelen hercoderen.</p>
<p>Deze stappen vinden in het algemeen plaats voordat we enige analyse of visualisatie doen die we in de ggplot2 en dplyr tutorials hebben gezien, hoewel vaak meerdere iteraties nodig zijn. Tot nu toe ontvingen we onze gegevens altijd in een vrij schone staat, maar dat is zelden het geval in de werkelijkheid. Nu is het tijd om onze eigen cleaning te doen. Laten we aan de slag gaan!</p>
</div>
<div id="gegevens-lezen" class="section level2" number="8.3">
<h2><span class="header-section-number">8.3</span> Gegevens lezen</h2>
<p>Voor dit vak zullen we de verschillende data formaten en hoe ze te lezen niet uitvoerig bespreken.<a href="#fn27" class="footnote-ref" id="fnref27"><sup>27</sup></a> Meestal zullen we de <code>readRDS</code> functie gebruiken, die je waarschijnlijk al eerder hebt gezien. Bijvoorbeeld,</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="tutorial-data-voorbereiden.html#cb147-1" aria-hidden="true" tabindex="-1"></a>survey <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;survey.RDS&quot;</span>)</span></code></pre></div>
<p>Een .RDS-bestand slaat een <strong>enkel</strong> R-object op een geserialiseerde manier op. (RDS kan worden opgevat als R Data Serialized). We kunnen een .RDS-bestand maken met <code>saveRDS</code> en er een lezen met <code>readRDS</code>.</p>
<p>Informatiesystemen zullen <strong>nooit</strong> gegevens exporteren als .RDS-bestanden – alle .RDS-bestanden worden gemaakt binnen R. Alle .RDS-bestanden die je hebt gebruikt in de oefeningen en tutorials zijn door ons gemaakt. Dus, in welk type bestanden kunnen gegevens in het wild dan gevonden worden? We geven je een korte rondleiding langs veel voorkomende bestandsformaten.</p>
<div id="csv-and-tsv" class="section level3" number="8.3.1">
<h3><span class="header-section-number">8.3.1</span> CSV and TSV</h3>
<p>CSV-bestanden zijn waarschijnlijk het meest voorkomende type gegevensbestanden. CSV staat voor Comma Seperated Values (komma gescheiden waarden). Deze bestanden kunnen worden gezien als gewone tekstbestanden, waarbij elke regel een waarneming is, d.w.z. een rij, en de kolommen worden gescheiden door komma’s (vandaar de naam). De eerste rij kan de namen van de kolommen bevatten, hoewel dit niet noodzakelijk is. TSV is een veel minder gebruikelijke variant, die staat voor Tab Separated Values. Zoals de naam al zegt, worden de waarden in dit bestand niet gescheiden door komma’s, maar door tabs.</p>
<p>Voor CSV-bestanden zijn er twee verschillende importfuncties: <code>read.csv</code> en <code>read.csv2</code>. De eerste is voor normale door komma’s gescheiden bestanden, terwijl de tweede voor door puntkomma’s gescheiden bestanden is. Verder is het gebruik vergelijkbaar met <code>readRDS</code>. De functies voor TSV zijn vergelijkbaar – alleen met een T in plaats van een C.</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="tutorial-data-voorbereiden.html#cb148-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;path/to/data/file.csv&quot;</span>)</span>
<span id="cb148-2"><a href="tutorial-data-voorbereiden.html#cb148-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-3"><a href="tutorial-data-voorbereiden.html#cb148-3" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv2</span>(<span class="st">&quot;path/to/data/file.csv&quot;</span>)</span></code></pre></div>
<p>Beide functies zijn base-R functies, en hebben veel extra argumenten om het resulterende data.frame te verfijnen op basis van eigenaardigheden in het databestand. Ze worden echter minder gebruikt sinds het <code>readr</code> pakket uit de tidyverse snellere functies introduceerde met betere defaults. Deze functies zijn <code>read_csv</code> en <code>read_csv2</code>, d.w.z. met een underscore in plaats van een punt.</p>
</div>
<div id="excel" class="section level3" number="8.3.2">
<h3><span class="header-section-number">8.3.2</span> Excel</h3>
<p>Hoewel wij niet erg van Excel houden, doen veel mensen dat helaas nog steeds. Het is dan ook waarschijnlijk dat je vroeg of laat een Excel bestand moet inlezen. Het inlezen van Excel bestanden kan met behulp van het speciale <code>readxl</code> package. Dit pakket bevat de <code>read_excel</code> functie.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="tutorial-data-voorbereiden.html#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb149-2"><a href="tutorial-data-voorbereiden.html#cb149-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;path/to/excel/file.xlsx&quot;</span>)</span></code></pre></div>
<p>Nogmaals, net als voor csv, zijn er veel extra argumenten in <code>read_excel</code>. Je kan bijvoorbeeld het blad in het excel-bestand dat je wilt lezen instellen, je kunt de types van de variabelen configureren, en je kunt zelfs een bereik in het excel-bestand opgeven dat je wilt lezen, bijv. B3:G8.</p>
</div>
<div id="json-en-xml" class="section level3" number="8.3.3">
<h3><span class="header-section-number">8.3.3</span> JSON en XML</h3>
<p>JSON - of JavaScript Object Notation - en XML - eXtensible Markup Language - zijn veel complexere gegevensnotaties in vergelijking met CSV. We zullen deze formaten hier niet bespreken, maar in plaats daarvan alleen de pakketten noemen die je kunt gebruiken als je deze types tegenkomt.</p>
<ul>
<li>Voor JSON is het meest gebruikte R-pakket <code>jsonlite</code>, dat de <code>fromJSON</code> functie bevat.</li>
<li>Voor XML zijn er meerdere opties, maar wij adviseren het <code>xml2</code> pakket. Voor <code>xml</code> bestanden is er niet een enkele functie, maar zul je typisch veel functies moeten combineren om de data in het juiste formaat te krijgen.</li>
</ul>
</div>
<div id="andere-statistische-pakketten" class="section level3" number="8.3.4">
<h3><span class="header-section-number">8.3.4</span> Andere statistische pakketten</h3>
<p>Soms moet je gegevens lezen die afkomstig zijn van andere commerciële data-analyse en statistische software die door minder R-vaardige medewerkers wordt gebruikt. (Vaak is dit nodig omdat de betreffende analyse niet door de commerciële pakketten kan worden gedaan en R je moet redden.) In het bijzonder kunnen bestanden afkomstig zijn van SPSS, STATA en SAS. Voor elk van deze bestanden bevat het <code>haven</code> pakket een lees-functie.</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="tutorial-data-voorbereiden.html#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="co"># SPSS</span></span>
<span id="cb150-2"><a href="tutorial-data-voorbereiden.html#cb150-2" aria-hidden="true" tabindex="-1"></a><span class="fu">read_spps</span>(<span class="st">&quot;file&quot;</span>)</span>
<span id="cb150-3"><a href="tutorial-data-voorbereiden.html#cb150-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-4"><a href="tutorial-data-voorbereiden.html#cb150-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Stata</span></span>
<span id="cb150-5"><a href="tutorial-data-voorbereiden.html#cb150-5" aria-hidden="true" tabindex="-1"></a><span class="fu">read_dta</span>(<span class="st">&quot;file&quot;</span>)</span>
<span id="cb150-6"><a href="tutorial-data-voorbereiden.html#cb150-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-7"><a href="tutorial-data-voorbereiden.html#cb150-7" aria-hidden="true" tabindex="-1"></a><span class="co"># sas</span></span>
<span id="cb150-8"><a href="tutorial-data-voorbereiden.html#cb150-8" aria-hidden="true" tabindex="-1"></a><span class="fu">read_sas</span>(<span class="st">&quot;file&quot;</span>)</span></code></pre></div>
</div>
<div id="databases" class="section level3" number="8.3.5">
<h3><span class="header-section-number">8.3.5</span> Databases</h3>
<p>Tenslotte is het ook mogelijk gegevens te analyseren die in een database zijn opgeslagen. De manier waarop zal afhangen van het type database. Een van de handige pakketten is <code>DBI</code>, maar je hebt dan wel een specifieke database backend nodig, zoals <code>RMySL</code>, <code>RSQLite</code>, <code>RPostgreSQL</code>). Ook handig is <code>dbplyr</code>, waarmee veel <code>dplyr</code> functies direct op een databank gebruikt kunnen worden, zodat zware berekeningen niet door je pc gedaan hoeven te worden.</p>
</div>
<div id="achtergrond-materiaal" class="section level3" number="8.3.6">
<h3><span class="header-section-number">8.3.6</span> Achtergrond materiaal</h3>
<p>Meer informatie over het importeren van gegevens vindt u in hoofdstuk 11 van het <a href="https://r4ds.had.co.nz/data-import.html">R for Data Science boek</a>, en op de helppagina’s van genoemde pakketten en functies.</p>
<p><em><strong>Dit is het einde van de optionele sectie over data import</strong></em></p>
</div>
<div id="variabelen-omzetten" class="section level3" number="8.3.7">
<h3><span class="header-section-number">8.3.7</span> Variabelen omzetten</h3>
<p>Vaak is een integraal deel van het lezen van gegevens uit bestanden, ervoor te zorgen dat alle variabelen in onze gegevens correct zijn opgeslagen. Laat factoren factoren zijn, en getallen getallen. Laten we eens kijken naar de dataset.</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="tutorial-data-voorbereiden.html#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(survey)</span></code></pre></div>
<pre><code>## Rows: 21,483
## Columns: 9
## $ year    &lt;chr&gt; &quot;2000&quot;, &quot;2000&quot;, &quot;2000&quot;, &quot;2000&quot;, &quot;2000&quot;, &quot;2000&quot;, &quot;2000&quot;, &quot;2000&quot;~
## $ marital &lt;chr&gt; &quot;Never married&quot;, &quot;Divorced&quot;, &quot;Widowed&quot;, &quot;Never married&quot;, &quot;Divo~
## $ age     &lt;chr&gt; &quot;26&quot;, &quot;48&quot;, &quot;67&quot;, &quot;39&quot;, &quot;25&quot;, &quot;25&quot;, &quot;36&quot;, &quot;44&quot;, &quot;44&quot;, &quot;47&quot;, &quot;5~
## $ race    &lt;chr&gt; &quot;White&quot;, &quot;White&quot;, &quot;White&quot;, &quot;White&quot;, &quot;White&quot;, &quot;White&quot;, &quot;White&quot;,~
## $ rincome &lt;chr&gt; &quot;$8000 to 9999&quot;, &quot;$8000 to 9999&quot;, &quot;Not applicable&quot;, &quot;Not appli~
## $ partyid &lt;chr&gt; &quot;Ind,near rep&quot;, &quot;Not str republican&quot;, &quot;Independent&quot;, &quot;Ind,near~
## $ relig   &lt;chr&gt; &quot;Protestant&quot;, &quot;Protestant&quot;, &quot;Protestant&quot;, &quot;Orthodox-christian&quot;~
## $ denom   &lt;chr&gt; &quot;Southern baptist&quot;, &quot;Baptist-dk which&quot;, &quot;No denomination&quot;, &quot;No~
## $ tvhours &lt;chr&gt; &quot;12&quot;, NA, &quot;2&quot;, &quot;4&quot;, &quot;1&quot;, NA, &quot;3&quot;, NA, &quot;0&quot;, &quot;3&quot;, &quot;2&quot;, NA, &quot;1&quot;, ~</code></pre>
<p>Dat lijkt niet erg juist. Door een of andere duivelse kracht zijn alle variabelen als characters opgeslagen, wat niet echt correct is. De variabelen <code>jaar</code> en <code>leeftijd</code> moeten zeker numeriek zijn, terwijl <code>huwelijk</code> bijvoorbeeld duidelijk een nominale variabele is, en deze als factor moet worden opgeslagen.</p>
<p>Het type van variabelen kan veranderd worden met de volgende functies:<a href="#fn28" class="footnote-ref" id="fnref28"><sup>28</sup></a></p>
<ul>
<li><code>as.numeric</code> -&gt; voor numerieke variabelen</li>
<li><code>as.integer</code> -&gt; voor gehele getallen variabelen</li>
<li><code>(as.)factor</code> -&gt; voor nominale variabelen</li>
<li><code>(as.)ordered</code> -&gt; voor ordinale variabelen</li>
<li><code>as.character</code> -&gt; voor karaktervariabelen</li>
</ul>
<p>Om dit op te lossen, gebruiken we een oude bekende uit <code>dplyr</code>: <code>mutate</code>. We hebben al geleerd dat mutate gebruikt kan worden om nieuwe variabelen aan een dataset toe te voegen, maar we kunnen het net zo goed gebruiken om bestaande variabelen te <em>overschrijven</em>.</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="tutorial-data-voorbereiden.html#cb153-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb153-2"><a href="tutorial-data-voorbereiden.html#cb153-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb153-3"><a href="tutorial-data-voorbereiden.html#cb153-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">as.integer</span>(year),</span>
<span id="cb153-4"><a href="tutorial-data-voorbereiden.html#cb153-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">marital =</span> <span class="fu">as.factor</span>(marital),</span>
<span id="cb153-5"><a href="tutorial-data-voorbereiden.html#cb153-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">as.integer</span>(age),</span>
<span id="cb153-6"><a href="tutorial-data-voorbereiden.html#cb153-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">race =</span> <span class="fu">as.factor</span>(race),</span>
<span id="cb153-7"><a href="tutorial-data-voorbereiden.html#cb153-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">rincome =</span> <span class="fu">as.factor</span>(rincome),</span>
<span id="cb153-8"><a href="tutorial-data-voorbereiden.html#cb153-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">partyid =</span> <span class="fu">as.factor</span>(partyid),</span>
<span id="cb153-9"><a href="tutorial-data-voorbereiden.html#cb153-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">relig =</span> <span class="fu">as.factor</span>(relig),</span>
<span id="cb153-10"><a href="tutorial-data-voorbereiden.html#cb153-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">denom =</span> <span class="fu">as.factor</span>(denom),</span>
<span id="cb153-11"><a href="tutorial-data-voorbereiden.html#cb153-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">tvhours =</span> <span class="fu">as.numeric</span>(tvhours)</span>
<span id="cb153-12"><a href="tutorial-data-voorbereiden.html#cb153-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb153-13"><a href="tutorial-data-voorbereiden.html#cb153-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 21,483
## Columns: 9
## $ year    &lt;int&gt; 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 20~
## $ marital &lt;fct&gt; Never married, Divorced, Widowed, Never married, Divorced, Mar~
## $ age     &lt;int&gt; 26, 48, 67, 39, 25, 25, 36, 44, 44, 47, 53, 52, 52, 51, 52, 40~
## $ race    &lt;fct&gt; White, White, White, White, White, White, White, White, White,~
## $ rincome &lt;fct&gt; $8000 to 9999, $8000 to 9999, Not applicable, Not applicable, ~
## $ partyid &lt;fct&gt; &quot;Ind,near rep&quot;, &quot;Not str republican&quot;, &quot;Independent&quot;, &quot;Ind,near~
## $ relig   &lt;fct&gt; Protestant, Protestant, Protestant, Orthodox-christian, None, ~
## $ denom   &lt;fct&gt; &quot;Southern baptist&quot;, &quot;Baptist-dk which&quot;, &quot;No denomination&quot;, &quot;No~
## $ tvhours &lt;dbl&gt; 12, NA, 2, 4, 1, NA, 3, NA, 0, 3, 2, NA, 1, NA, 1, 7, NA, 3, 3~</code></pre>
<p>Dat ziet er al beter uit! Merk echter op dat we het resultaat van onze inspanningen nog niet hebben opgeslagen. Eigenlijk willen we van de gelegenheid gebruik maken om alle variabelen een makkelijke en begrijpelijke naam te geven. Hiervoor kunnen we de <code>rename</code> functie gebruiken. <code>rename</code> is een dplyr functie met een heel duidelijke taak: variabelen hernoemen. Je kunt hem gebruiken door hem een lijst met nieuwe namen te geven, gekoppeld aan oude namen: <code>new_name = old_name</code>.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="tutorial-data-voorbereiden.html#cb155-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb155-2"><a href="tutorial-data-voorbereiden.html#cb155-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb155-3"><a href="tutorial-data-voorbereiden.html#cb155-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">as.integer</span>(year),</span>
<span id="cb155-4"><a href="tutorial-data-voorbereiden.html#cb155-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">marital =</span> <span class="fu">as.factor</span>(marital),</span>
<span id="cb155-5"><a href="tutorial-data-voorbereiden.html#cb155-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">as.integer</span>(age),</span>
<span id="cb155-6"><a href="tutorial-data-voorbereiden.html#cb155-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">race =</span> <span class="fu">as.factor</span>(race),</span>
<span id="cb155-7"><a href="tutorial-data-voorbereiden.html#cb155-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">rincome =</span> <span class="fu">as.factor</span>(rincome),</span>
<span id="cb155-8"><a href="tutorial-data-voorbereiden.html#cb155-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">partyid =</span> <span class="fu">as.factor</span>(partyid),</span>
<span id="cb155-9"><a href="tutorial-data-voorbereiden.html#cb155-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">relig =</span> <span class="fu">as.factor</span>(relig),</span>
<span id="cb155-10"><a href="tutorial-data-voorbereiden.html#cb155-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">denom =</span> <span class="fu">as.factor</span>(denom),</span>
<span id="cb155-11"><a href="tutorial-data-voorbereiden.html#cb155-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">tvhours =</span> <span class="fu">as.numeric</span>(tvhours)</span>
<span id="cb155-12"><a href="tutorial-data-voorbereiden.html#cb155-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb155-13"><a href="tutorial-data-voorbereiden.html#cb155-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb155-14"><a href="tutorial-data-voorbereiden.html#cb155-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">reported_income =</span> rincome,</span>
<span id="cb155-15"><a href="tutorial-data-voorbereiden.html#cb155-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">party =</span> partyid,</span>
<span id="cb155-16"><a href="tutorial-data-voorbereiden.html#cb155-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">religion =</span> relig,</span>
<span id="cb155-17"><a href="tutorial-data-voorbereiden.html#cb155-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">denomination =</span> denom,</span>
<span id="cb155-18"><a href="tutorial-data-voorbereiden.html#cb155-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">tv_hours =</span> tvhours</span>
<span id="cb155-19"><a href="tutorial-data-voorbereiden.html#cb155-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb155-20"><a href="tutorial-data-voorbereiden.html#cb155-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 21,483
## Columns: 9
## $ year            &lt;int&gt; 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, ~
## $ marital         &lt;fct&gt; Never married, Divorced, Widowed, Never married, Divor~
## $ age             &lt;int&gt; 26, 48, 67, 39, 25, 25, 36, 44, 44, 47, 53, 52, 52, 51~
## $ race            &lt;fct&gt; White, White, White, White, White, White, White, White~
## $ reported_income &lt;fct&gt; $8000 to 9999, $8000 to 9999, Not applicable, Not appl~
## $ party           &lt;fct&gt; &quot;Ind,near rep&quot;, &quot;Not str republican&quot;, &quot;Independent&quot;, &quot;~
## $ religion        &lt;fct&gt; Protestant, Protestant, Protestant, Orthodox-christian~
## $ denomination    &lt;fct&gt; &quot;Southern baptist&quot;, &quot;Baptist-dk which&quot;, &quot;No denominati~
## $ tv_hours        &lt;dbl&gt; 12, NA, 2, 4, 1, NA, 3, NA, 0, 3, 2, NA, 1, NA, 1, 7, ~</code></pre>
<p>Er is zeker geen juist antwoord voor de naamgeving van variabelen. Zorg er gewoon voor dat hun namen begrijpelijk, gemakkelijk te gebruiken en enigszins uniform getypt zijn.</p>
<p>Merk verder op dat wat we net deden niet de enige mogelijke manier is. We zouden bijvoorbeeld ook direct de nieuwe variabelennamen kunnen maken met mutate, hoewel we daarna de oude namen wel nog zullen moeten verwijderen.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="tutorial-data-voorbereiden.html#cb157-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb157-2"><a href="tutorial-data-voorbereiden.html#cb157-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb157-3"><a href="tutorial-data-voorbereiden.html#cb157-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">as.integer</span>(year),</span>
<span id="cb157-4"><a href="tutorial-data-voorbereiden.html#cb157-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">marital =</span> <span class="fu">as.factor</span>(marital),</span>
<span id="cb157-5"><a href="tutorial-data-voorbereiden.html#cb157-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">as.integer</span>(age),</span>
<span id="cb157-6"><a href="tutorial-data-voorbereiden.html#cb157-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">race =</span> <span class="fu">as.factor</span>(race),</span>
<span id="cb157-7"><a href="tutorial-data-voorbereiden.html#cb157-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">reported_income =</span> <span class="fu">as.factor</span>(rincome),</span>
<span id="cb157-8"><a href="tutorial-data-voorbereiden.html#cb157-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">party =</span> <span class="fu">as.factor</span>(partyid),</span>
<span id="cb157-9"><a href="tutorial-data-voorbereiden.html#cb157-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">religion =</span> <span class="fu">as.factor</span>(relig),</span>
<span id="cb157-10"><a href="tutorial-data-voorbereiden.html#cb157-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">denomination =</span> <span class="fu">as.factor</span>(denom),</span>
<span id="cb157-11"><a href="tutorial-data-voorbereiden.html#cb157-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">tv_hours =</span> <span class="fu">as.numeric</span>(tvhours)</span>
<span id="cb157-12"><a href="tutorial-data-voorbereiden.html#cb157-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb157-13"><a href="tutorial-data-voorbereiden.html#cb157-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>rincome<span class="sc">:-</span>tvhours) <span class="sc">%&gt;%</span></span>
<span id="cb157-14"><a href="tutorial-data-voorbereiden.html#cb157-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 21,483
## Columns: 9
## $ year            &lt;int&gt; 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000, ~
## $ marital         &lt;fct&gt; Never married, Divorced, Widowed, Never married, Divor~
## $ age             &lt;int&gt; 26, 48, 67, 39, 25, 25, 36, 44, 44, 47, 53, 52, 52, 51~
## $ race            &lt;fct&gt; White, White, White, White, White, White, White, White~
## $ reported_income &lt;fct&gt; $8000 to 9999, $8000 to 9999, Not applicable, Not appl~
## $ party           &lt;fct&gt; &quot;Ind,near rep&quot;, &quot;Not str republican&quot;, &quot;Independent&quot;, &quot;~
## $ religion        &lt;fct&gt; Protestant, Protestant, Protestant, Orthodox-christian~
## $ denomination    &lt;fct&gt; &quot;Southern baptist&quot;, &quot;Baptist-dk which&quot;, &quot;No denominati~
## $ tv_hours        &lt;dbl&gt; 12, NA, 2, 4, 1, NA, 3, NA, 0, 3, 2, NA, 1, NA, 1, 7, ~</code></pre>
<p>Het resultaat is hetzelfde, maar de code is iets korter. Als je dit echt onder de knie wilt krijgen, is het misschien interessant om te weten dat er veel varianten op mutate zijn die je leven misschien nog eenvoudiger (of verwarrender) maken.</p>
<ul>
<li>transmute: dit zal <strong>alleen</strong> de <em>nieuwe</em> variabelen in je lijst houden</li>
<li>mutate_if: dit werkt op dezelfde manier als select_if, b.v. een functie toepassen op een bepaald type kolommen</li>
<li>mutate_at: dit zal een functie toepassen op een bepaalde set van kolommen die je opgeeft.</li>
</ul>
<p>Maak je geen zorgen. Je zult een heel eind komen als je select, mutate en rename kunt gebruiken. Maar wees niet bang om jezelf uit te dagen en de meer geavanceerde dingen uit te proberen.</p>
<p>Nu, laten we verder gaan. Voordat we dat doen, kopiëren we het laatste stukje code, waarbij we dit keer het resultaat weer opslaan als <code>survey</code>, waarmee we de oude versie overschrijven. U kunt dit op twee manieren doen: of je zet <code>survey &lt;-</code> voor het stukje code, of je zet <code>-&gt; survey</code> na het stukje code. Nogmaals, er is geen foute of goede manier. Persoonlijk geef ik de voorkeur aan de laatste optie, omdat het mooi aansluit bij ons verhaal dat we hebben gemaakt met het <code>%&gt;%</code> symbool: we nemen een dataset, we voeren een aantal stappen uit, en dan slaan we het op.</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="tutorial-data-voorbereiden.html#cb159-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb159-2"><a href="tutorial-data-voorbereiden.html#cb159-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb159-3"><a href="tutorial-data-voorbereiden.html#cb159-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">as.integer</span>(year),</span>
<span id="cb159-4"><a href="tutorial-data-voorbereiden.html#cb159-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">marital =</span> <span class="fu">as.factor</span>(marital),</span>
<span id="cb159-5"><a href="tutorial-data-voorbereiden.html#cb159-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">as.integer</span>(age),</span>
<span id="cb159-6"><a href="tutorial-data-voorbereiden.html#cb159-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">race =</span> <span class="fu">as.factor</span>(race),</span>
<span id="cb159-7"><a href="tutorial-data-voorbereiden.html#cb159-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">reported_income =</span> <span class="fu">as.factor</span>(rincome),</span>
<span id="cb159-8"><a href="tutorial-data-voorbereiden.html#cb159-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">party =</span> <span class="fu">as.factor</span>(partyid),</span>
<span id="cb159-9"><a href="tutorial-data-voorbereiden.html#cb159-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">religion =</span> <span class="fu">as.factor</span>(relig),</span>
<span id="cb159-10"><a href="tutorial-data-voorbereiden.html#cb159-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">denomination =</span> <span class="fu">as.factor</span>(denom),</span>
<span id="cb159-11"><a href="tutorial-data-voorbereiden.html#cb159-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">tv_hours =</span> <span class="fu">as.numeric</span>(tvhours)</span>
<span id="cb159-12"><a href="tutorial-data-voorbereiden.html#cb159-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb159-13"><a href="tutorial-data-voorbereiden.html#cb159-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>rincome<span class="sc">:-</span>tvhours) <span class="ot">-&gt;</span> survey</span></code></pre></div>
<p>Dit is een goede plaats om aandacht te besteden aan work-flow aspecten. Vroeger, tijdens de analyse van gegevens, hingen verschillende stukken code zelden van elkaar af. Als we bijvoorbeeld grafiek A maakten en daarna tabel B, konden beide onafhankelijk van elkaar worden gemaakt. We sloegen de resultaten die we maakten nooit op om later te gebruiken (afgezien van een steekproef van gegevens die we soms namen). Nu we echter de gegevens gaan opschonen en transformeren, zullen we het data.frame altijd bijwerken, meestal onder dezelfde naam. We willen immers niet eindigen met een lijst van survey, survey2, survey3, survey4, zonder hun verschillen te onthouden. Dus, bij elke stap, updaten we de vorige versie van de survey dataset.</p>
<p>Er is echter een risico. Als wij een fout maken, kunnen onze gegevens worden beschadig. Als wij bijvoorbeeld race perongeluk hebben geconverteerd naar numeriek, zal de functie as.numeric hier niet in slagen en in plaats daarvan een kolom vol met NA’s creëren. We kunnen dan snel onze fout in de code rechtzetten, maar dit zal de originele race variabele niet terugbrengen – die was weg op het moment dat we ze per vergissing converteerden.</p>
<p>Om onze fouten recht te zetten, zullen we de gegevens opnieuw moeten laden, en ook alle transformaties die we al eerder hebben toegepast. Alleen de code corrigeren zal niet meer voldoende zijn, <strong>we moeten onze data corrigeren</strong>. Wanneer je in R Markdown werkt, kun je dit het beste doen met de centrale knop in een R-chunk, omdat je dan alle vorige R-chunks opnieuw uitvoert, waardoor onze gegevens weer in de staat komen waarin ze eerder waren.</p>
<p>Deze afhankelijkheden in onze workflow betekenen ook dat oefeningen meer van elkaar afhankelijk zullen zijn, en we moeten er altijd voor zorgen dat we ons bijgewerkte data.frame opslaan. Het niet bijwerken van de gegevens (of het niet uitvoeren van de code) zal later een frequente bron van fouten zijn. Let op. (U bent gewaarschuwd)</p>
</div>
</div>
<div id="cleaning-data" class="section level2" number="8.4">
<h2><span class="header-section-number">8.4</span> Cleaning Data</h2>
<p>Nu we de gegevens hebben geïmporteerd en er zeker van zijn dat alle variabelen ten minste het juiste type hebben, is het tijd om de gegevens op te schonen. In het bijzonder zullen we de volgende onderwerpen behandelen</p>
<ul>
<li>Dubbele observaties</li>
<li>Cleanen van categorische variabelen</li>
<li>Cleanen van continue variabelen</li>
<li>Controleren van inconsistencies in de gegevens</li>
</ul>
<p>Verder zullen we ook enige tijd besteden aan het bespreken van ontbrekende waarden. Dat zijn een heleboel concepten om te behandelen, dus laten we beginnen!</p>
<div id="dubbele-observaties" class="section level3" number="8.4.1">
<h3><span class="header-section-number">8.4.1</span> Dubbele observaties</h3>
<p>Soms kan het gebeuren dat sommige rijen per ongeluk meerdere keren in de dataset zijn opgenomen. Er is een gemakkelijke manier om deze te vinden, en te verwijderen.
De <code>duplicated</code> functie (een base-R functie), geeft een logische vector terug die dubbele rijen in een dataset aangeeft. De vector heeft dezelfde lengte als het aantal rijen in de dataset, en is <code>TRUE</code> voor rijen die niet uniek zijn, en <code>FALSE</code> anders.</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="tutorial-data-voorbereiden.html#cb160-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb160-2"><a href="tutorial-data-voorbereiden.html#cb160-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">duplicated</span>() <span class="sc">%&gt;%</span></span>
<span id="cb160-3"><a href="tutorial-data-voorbereiden.html#cb160-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>()</span></code></pre></div>
<pre><code>##    Mode   FALSE    TRUE 
## logical   21220     263</code></pre>
<p>Het lijkt erop dat er 263 in onze gegevens zitten die niet uniek zijn. We kunnen deze bekijken door de uitvoer van duplicated te gebruiken als invoer van filter.</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="tutorial-data-voorbereiden.html#cb162-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb162-2"><a href="tutorial-data-voorbereiden.html#cb162-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">duplicated</span>(.))</span></code></pre></div>
<pre><code>## # A tibble: 263 x 9
##     year marital         age race  reported_income party   religion denomination
##    &lt;int&gt; &lt;fct&gt;         &lt;int&gt; &lt;fct&gt; &lt;fct&gt;           &lt;fct&gt;   &lt;fct&gt;    &lt;fct&gt;       
##  1  2000 Married          48 White $25000 or more  Ind,ne~ Catholic Not applica~
##  2  2000 Never married    39 Other $25000 or more  Not st~ Catholic Not applica~
##  3  2000 Married          36 Other $25000 or more  Not st~ Catholic Not applica~
##  4  2000 Never married    30 White $25000 or more  Not st~ Catholic Not applica~
##  5  2000 Never married    19 White $1000 to 2999   Not st~ Catholic Not applica~
##  6  2000 Married          47 White $25000 or more  Not st~ Catholic Not applica~
##  7  2000 Married          29 White $25000 or more  Indepe~ Catholic Not applica~
##  8  2000 Married          39 White $10000 - 14999  Not st~ Catholic Not applica~
##  9  2000 Widowed          80 White Not applicable  Strong~ Protest~ Southern ba~
## 10  2002 Married          43 White Not applicable  Indepe~ Catholic Not applica~
## # ... with 253 more rows, and 1 more variable: tv_hours &lt;dbl&gt;</code></pre>
<p>Zie je de . in de <code>duplicated</code> functie? De punt heeft een speciale betekenis als hij samen met het piping-symbool wordt gebruikt. Intern zal het vervangen worden door de invoer die door het piping symbool komt. Als zodanig is <code>survey %&gt;% filter(duplicated(.))</code> gelijk aan <code>filter(survey, duplicated(survey))</code>. Dit is erg handig als je meerdere keren naar de piping-invoer moet verwijzen, niet alleen als eerste argument van de functie.</p>
<p>Op dit moment hebben we de dubbele rijen geselecteerd en kunnen we ze bekijken. Als we alleen de unieke rijen willen behouden, kunnen we een !-symbool toevoegen om de selectie te negeren.</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="tutorial-data-voorbereiden.html#cb164-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb164-2"><a href="tutorial-data-voorbereiden.html#cb164-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">duplicated</span>(.))</span></code></pre></div>
<pre><code>## # A tibble: 21,220 x 9
##     year marital         age race  reported_income party   religion denomination
##    &lt;int&gt; &lt;fct&gt;         &lt;int&gt; &lt;fct&gt; &lt;fct&gt;           &lt;fct&gt;   &lt;fct&gt;    &lt;fct&gt;       
##  1  2000 Never married    26 White $8000 to 9999   Ind,ne~ Protest~ Southern ba~
##  2  2000 Divorced         48 White $8000 to 9999   Not st~ Protest~ Baptist-dk ~
##  3  2000 Widowed          67 White Not applicable  Indepe~ Protest~ No denomina~
##  4  2000 Never married    39 White Not applicable  Ind,ne~ Orthodo~ Not applica~
##  5  2000 Divorced         25 White Not applicable  Not st~ None     Not applica~
##  6  2000 Married          25 White $20000 - 24999  Strong~ Protest~ Southern ba~
##  7  2000 Never married    36 White $25000 or more  Not st~ Christi~ Not applica~
##  8  2000 Divorced         44 White $7000 to 7999   Ind,ne~ Protest~ Lutheran-mo~
##  9  2000 Married          44 White $25000 or more  Not st~ Protest~ Other       
## 10  2000 Married          47 White $25000 or more  Strong~ Protest~ Southern ba~
## # ... with 21,210 more rows, and 1 more variable: tv_hours &lt;dbl&gt;</code></pre>
<p>Dit is echter een beetje omslachtig. Daarom bevat <code>dplyr</code> een heel handige short cut: de <code>distinct</code> functie.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="tutorial-data-voorbereiden.html#cb166-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb166-2"><a href="tutorial-data-voorbereiden.html#cb166-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span></code></pre></div>
<pre><code>## # A tibble: 21,220 x 9
##     year marital         age race  reported_income party   religion denomination
##    &lt;int&gt; &lt;fct&gt;         &lt;int&gt; &lt;fct&gt; &lt;fct&gt;           &lt;fct&gt;   &lt;fct&gt;    &lt;fct&gt;       
##  1  2000 Never married    26 White $8000 to 9999   Ind,ne~ Protest~ Southern ba~
##  2  2000 Divorced         48 White $8000 to 9999   Not st~ Protest~ Baptist-dk ~
##  3  2000 Widowed          67 White Not applicable  Indepe~ Protest~ No denomina~
##  4  2000 Never married    39 White Not applicable  Ind,ne~ Orthodo~ Not applica~
##  5  2000 Divorced         25 White Not applicable  Not st~ None     Not applica~
##  6  2000 Married          25 White $20000 - 24999  Strong~ Protest~ Southern ba~
##  7  2000 Never married    36 White $25000 or more  Not st~ Christi~ Not applica~
##  8  2000 Divorced         44 White $7000 to 7999   Ind,ne~ Protest~ Lutheran-mo~
##  9  2000 Married          44 White $25000 or more  Not st~ Protest~ Other       
## 10  2000 Married          47 White $25000 or more  Strong~ Protest~ Southern ba~
## # ... with 21,210 more rows, and 1 more variable: tv_hours &lt;dbl&gt;</code></pre>
<p>Of we dubbele rijen willen verwijderen of niet hangt echt af van de gegevens en context. In ons geval is het helemaal niet verwonderlijk dat sommige van deze rijen dezelfde zijn. Het is gewoon zo dat sommige mensen erg op elkaar lijken: dezelfde leeftijd, inkomen, religie enz.</p>
<p>Maar in andere gevallen zouden dergelijke dubbele rijen onmogelijk zijn. Bijvoorbeeld, als er variabelen zijn die elke rij per definitie uniek zouden maken, zoals een nationaal identificatienummer. In dergelijke gevallen moeten dubbele rijen duidelijk verder bekeken worden en kan het verwijderen ervan de juiste oplossing zijn.</p>
</div>
<div id="cleaning-categorische-variabelen" class="section level3" number="8.4.2">
<h3><span class="header-section-number">8.4.2</span> Cleaning categorische variabelen</h3>
<p>Voor het opschonen van categorische variabelen bespreken wij de volgende wijzigingen</p>
<ul>
<li>Waarden hercoderen</li>
<li>Herordenen van waarden</li>
</ul>
<div id="hercoderen-categorische-variablen" class="section level4" number="8.4.2.1">
<h4><span class="header-section-number">8.4.2.1</span> Hercoderen Categorische Variablen</h4>
<p>Soms hebben categorische variabelen, d.w.z. factoren, vreemde of zelfs verkeerde labels. In dat geval zouden we deze waarden willen <em>hercoderen</em>. Het vinden van verkeerde labels is niet altijd gemakkelijk, en vaak komen deze fouten later tijdens de analyse aan het licht, in welk geval je een stap terug moet doen en ze achteraf moet corrigeren. Niettemin kan het bekijken van frequentietabellen in alfabetische volgorde, of gerangschikt van minst naar meest frequent, wijzen op enkele fouten.<a href="#fn29" class="footnote-ref" id="fnref29"><sup>29</sup></a> Laten we de partijvariabele als voorbeeld nemen.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="tutorial-data-voorbereiden.html#cb168-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb168-2"><a href="tutorial-data-voorbereiden.html#cb168-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(party)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 2
##    party                  n
##    &lt;fct&gt;              &lt;int&gt;
##  1 Don&#39;t know             1
##  2 Ind,near dem        2499
##  3 Ind,near rep        1791
##  4 Independent         4119
##  5 No answer            154
##  6 Not str democrat    3690
##  7 Not str republican  3032
##  8 Other party          393
##  9 Strong democrat     3490
## 10 Strong republican   2314</code></pre>
<p>Hoewel de waarden voor partij niet echt fout zijn, zijn ze niet allemaal uniform: Str en Strong, Ind en Independent… Laten we ze veranderen. We kunnen de factor labels hercoderen met de <code>fct_recode</code> functie van forcats. Als argumenten moeten we opgeven welke variabele we willen hercoderen, en welke levels we willen veranderen.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="tutorial-data-voorbereiden.html#cb170-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb170-2"><a href="tutorial-data-voorbereiden.html#cb170-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="sc">&lt;</span>factor_name<span class="sc">&gt;</span> <span class="er">=</span> <span class="fu">fct_recode</span>(<span class="sc">&lt;</span>factor_name<span class="sc">&gt;</span>, </span>
<span id="cb170-3"><a href="tutorial-data-voorbereiden.html#cb170-3" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;&lt;new_level1&gt;&quot;</span> <span class="ot">=</span> <span class="st">&quot;&lt;old_level1&gt;&quot;</span>,</span>
<span id="cb170-4"><a href="tutorial-data-voorbereiden.html#cb170-4" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">&quot;&lt;new_level2&gt;&quot;</span> <span class="ot">=</span> <span class="st">&quot;&lt;old_level2&gt;&quot;</span>)</span></code></pre></div>
<p>We kunnen zoveel oude velden hercoderen in nieuwe velden als we willen. Bovendien kun je meerdere oude velden vervangen door hetzelfde nieuwe veld. Elk niveau dat niet genoemd wordt, zal ongewijzigd blijven. Laten we wat uniformiteit brengen in de politieke voorkeuren.</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="tutorial-data-voorbereiden.html#cb171-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb171-2"><a href="tutorial-data-voorbereiden.html#cb171-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">party =</span> <span class="fu">fct_recode</span>(party,</span>
<span id="cb171-3"><a href="tutorial-data-voorbereiden.html#cb171-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Republican, strong&quot;</span>    <span class="ot">=</span> <span class="st">&quot;Strong republican&quot;</span>,</span>
<span id="cb171-4"><a href="tutorial-data-voorbereiden.html#cb171-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Republican, weak&quot;</span>      <span class="ot">=</span> <span class="st">&quot;Not str republican&quot;</span>,</span>
<span id="cb171-5"><a href="tutorial-data-voorbereiden.html#cb171-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Independent, near rep&quot;</span> <span class="ot">=</span> <span class="st">&quot;Ind,near rep&quot;</span>,</span>
<span id="cb171-6"><a href="tutorial-data-voorbereiden.html#cb171-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Independent, near dem&quot;</span> <span class="ot">=</span> <span class="st">&quot;Ind,near dem&quot;</span>,</span>
<span id="cb171-7"><a href="tutorial-data-voorbereiden.html#cb171-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Democrat, weak&quot;</span>        <span class="ot">=</span> <span class="st">&quot;Not str democrat&quot;</span>,</span>
<span id="cb171-8"><a href="tutorial-data-voorbereiden.html#cb171-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Democrat, strong&quot;</span>      <span class="ot">=</span> <span class="st">&quot;Strong democrat&quot;</span></span>
<span id="cb171-9"><a href="tutorial-data-voorbereiden.html#cb171-9" aria-hidden="true" tabindex="-1"></a>  )) <span class="ot">-&gt;</span> survey</span></code></pre></div>
<p>Vergeet niet de dataset op te slaan!</p>
</div>
<div id="ordenen-categorische-variablen" class="section level4" number="8.4.2.2">
<h4><span class="header-section-number">8.4.2.2</span> Ordenen Categorische Variablen</h4>
<p>Een andere mogelijkheid, vooral voor ordinale factoren, is dat de waarden niet echt fout zijn, maar dat ze in de verkeerde volgorde staan. Normaal is dit iets waar we opletten bij het lezen van de data, maar soms wel eens vergeten. Kijk bijvoorbeeld eens naar het gerapporteerde inkomen.</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="tutorial-data-voorbereiden.html#cb172-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb172-2"><a href="tutorial-data-voorbereiden.html#cb172-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(reported_income)</span></code></pre></div>
<pre><code>## # A tibble: 16 x 2
##    reported_income     n
##    &lt;fct&gt;           &lt;int&gt;
##  1 $1000 to 2999     395
##  2 $10000 - 14999   1168
##  3 $15000 - 19999   1048
##  4 $20000 - 24999   1283
##  5 $25000 or more   7363
##  6 $3000 to 3999     276
##  7 $4000 to 4999     226
##  8 $5000 to 5999     227
##  9 $6000 to 6999     215
## 10 $7000 to 7999     188
## 11 $8000 to 9999     340
## 12 Don&#39;t know        267
## 13 Lt $1000          286
## 14 No answer         183
## 15 Not applicable   7043
## 16 Refused           975</code></pre>
<p>De waarde “Lt $1000” - wat betekent Limited, of minder dan $1000 - zou eerst moeten worden getoond, maar in plaats daarvan staat het op de verkeerde plaats. Hier hebben we een andere forcats functie nodig, namelijk <code>fct_relevel</code>. Deze functie kan op twee verschillende manieren gebruikt worden om een level op een andere plaats te zetten.</p>
<p><strong>Optie 1</strong>: Verplaats één (of meer) niveau(’s) naar voren</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="tutorial-data-voorbereiden.html#cb174-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb174-2"><a href="tutorial-data-voorbereiden.html#cb174-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">factor_name =</span> <span class="fu">fct_relevel</span>(</span>
<span id="cb174-3"><a href="tutorial-data-voorbereiden.html#cb174-3" aria-hidden="true" tabindex="-1"></a>    factor_name,</span>
<span id="cb174-4"><a href="tutorial-data-voorbereiden.html#cb174-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;level1_to_move&quot;</span>, <span class="st">&quot;level2_to move&quot;</span>, <span class="st">&quot;...&quot;</span></span>
<span id="cb174-5"><a href="tutorial-data-voorbereiden.html#cb174-5" aria-hidden="true" tabindex="-1"></a>  ))</span></code></pre></div>
<p><strong>Optie 2</strong>: Een (of meer) niveau(’s) invoegen na een aantal N van niveaus</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="tutorial-data-voorbereiden.html#cb175-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb175-2"><a href="tutorial-data-voorbereiden.html#cb175-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">factor_name =</span> <span class="fu">fct_relevel</span>(factor_name,</span>
<span id="cb175-3"><a href="tutorial-data-voorbereiden.html#cb175-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;level1_to_move&quot;</span>, <span class="st">&quot;level2_to move&quot;</span>, <span class="st">&quot;...&quot;</span>,</span>
<span id="cb175-4"><a href="tutorial-data-voorbereiden.html#cb175-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">after =</span> N</span>
<span id="cb175-5"><a href="tutorial-data-voorbereiden.html#cb175-5" aria-hidden="true" tabindex="-1"></a>  ))</span></code></pre></div>
<p>Dus, laten we het LT $1000 niveau naar de eerste plaats verplaatsen.</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="tutorial-data-voorbereiden.html#cb176-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb176-2"><a href="tutorial-data-voorbereiden.html#cb176-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">reported_income =</span> <span class="fu">fct_relevel</span>(</span>
<span id="cb176-3"><a href="tutorial-data-voorbereiden.html#cb176-3" aria-hidden="true" tabindex="-1"></a>    reported_income,</span>
<span id="cb176-4"><a href="tutorial-data-voorbereiden.html#cb176-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Lt $1000&quot;</span></span>
<span id="cb176-5"><a href="tutorial-data-voorbereiden.html#cb176-5" aria-hidden="true" tabindex="-1"></a>  )) <span class="ot">-&gt;</span> survey</span></code></pre></div>
<p>We kunnen de resultaten controleren door telling te gebruiken op het bijgewerkte <code>survey</code> data.frame. (Want je hebt je wijziging opgeslaan, toch?)</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="tutorial-data-voorbereiden.html#cb177-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb177-2"><a href="tutorial-data-voorbereiden.html#cb177-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(reported_income)</span></code></pre></div>
<pre><code>## # A tibble: 16 x 2
##    reported_income     n
##    &lt;fct&gt;           &lt;int&gt;
##  1 Lt $1000          286
##  2 $1000 to 2999     395
##  3 $10000 - 14999   1168
##  4 $15000 - 19999   1048
##  5 $20000 - 24999   1283
##  6 $25000 or more   7363
##  7 $3000 to 3999     276
##  8 $4000 to 4999     226
##  9 $5000 to 5999     227
## 10 $6000 to 6999     215
## 11 $7000 to 7999     188
## 12 $8000 to 9999     340
## 13 Don&#39;t know        267
## 14 No answer         183
## 15 Not applicable   7043
## 16 Refused           975</code></pre>
<p>Het wijzigen van de volgorde van de niveaus van een categorische variabele is nuttig voor zowel nominale als ordinale gegevens. Voor ordinale gegevens is het logisch dat we willen dat de volgorde van de niveaus de juiste is. Maar ook voor nominale gegevens kan het nodig zijn de volgorde te veranderen. Er zijn bijvoorbeeld vaak “catch-all”-waarden zoals “Andere” of “Diverse.” Het is een goede gewoonte om deze waarden anders te behandelen dan de gewone waarden in een nominale variabele, door ze als laatste te zetten. Ze komen dan aan de ene kant van een grafiek of tabel te staan, en niet tussen de andere waarden. Laten we eens kijken naar partij.</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="tutorial-data-voorbereiden.html#cb179-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb179-2"><a href="tutorial-data-voorbereiden.html#cb179-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(party)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 2
##    party                     n
##    &lt;fct&gt;                 &lt;int&gt;
##  1 Don&#39;t know                1
##  2 Independent, near dem  2499
##  3 Independent, near rep  1791
##  4 Independent            4119
##  5 No answer               154
##  6 Democrat, weak         3690
##  7 Republican, weak       3032
##  8 Other party             393
##  9 Democrat, strong       3490
## 10 Republican, strong     2314</code></pre>
<p>Beslissen of een factor ordinaal is of niet, is niet altijd zo eenvoudig. Als we naar het gerapporteerde inkomen kijken, is het duidelijk dat er een rangorde is. Maar we hebben <code>partij</code> niet gedefinieerd als een geordende factor. Er is geen “beste” of “superieure” politieke partij, dus het expliciet programmeren van deze variabele als een ordinale factor zou een brug te ver zijn – we zouden dan moeten beslissen welke kant van het politieke spectrum de “laagste” en welke de “hoogste” is. Dit is echter enigszins ongewenst als we grafieken maken.</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="tutorial-data-voorbereiden.html#cb181-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb181-2"><a href="tutorial-data-voorbereiden.html#cb181-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(party)) <span class="sc">+</span></span>
<span id="cb181-3"><a href="tutorial-data-voorbereiden.html#cb181-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">fill =</span> <span class="st">&quot;dodgerblue4&quot;</span>) <span class="sc">+</span></span>
<span id="cb181-4"><a href="tutorial-data-voorbereiden.html#cb181-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb181-5"><a href="tutorial-data-voorbereiden.html#cb181-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-168-1.png" width="100%" /></p>
<p>Wanneer we geen ordinale factor hebben, zal de volgorde van de labels vaak alfabetisch zijn. In dit geval, omdat we de labels eerder hebben gehercodeerd, staan ze niet eens meer in alfabetische volgorde.<a href="#fn30" class="footnote-ref" id="fnref30"><sup>30</sup></a> De resulterende grafiek is moeilijk te lezen, omdat de x-as door elkaar is geschud. Een natuurlijke reflex zou zijn om het staafdiagram te ordenen volgens frequentie, maar dat zou de leesbaarheid in dit speciale geval niet echt verbeteren. In plaats daarvan kunnen we een logischer volgorde toepassen, zonder dat we de partij als een ordinale variabele hoeven te beschouwen. Een dergelijke logische volgorde is gemakkelijk beschikbaar voor de huidige variabele, aangezien we vaak spreken van linkse en rechtse politici. We kunnen de alternatieve antwoorden (Weet niet, Geen Antwoord, Andere Partij) laten staan, hetzij aan het begin of aan het einde van de volgorde. Door ze niet te vermelden in de code hieronder, zal het laatste gebeuren.</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="tutorial-data-voorbereiden.html#cb182-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb182-2"><a href="tutorial-data-voorbereiden.html#cb182-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">party =</span> <span class="fu">fct_relevel</span>(</span>
<span id="cb182-3"><a href="tutorial-data-voorbereiden.html#cb182-3" aria-hidden="true" tabindex="-1"></a>    party,</span>
<span id="cb182-4"><a href="tutorial-data-voorbereiden.html#cb182-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Democrat, strong&quot;</span>,</span>
<span id="cb182-5"><a href="tutorial-data-voorbereiden.html#cb182-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Democrat, weak&quot;</span>,</span>
<span id="cb182-6"><a href="tutorial-data-voorbereiden.html#cb182-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Independent, near dem&quot;</span>,</span>
<span id="cb182-7"><a href="tutorial-data-voorbereiden.html#cb182-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Independent&quot;</span>,</span>
<span id="cb182-8"><a href="tutorial-data-voorbereiden.html#cb182-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Independent, near rep&quot;</span>,</span>
<span id="cb182-9"><a href="tutorial-data-voorbereiden.html#cb182-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Republican, weak&quot;</span>,</span>
<span id="cb182-10"><a href="tutorial-data-voorbereiden.html#cb182-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Republican, strong&quot;</span></span>
<span id="cb182-11"><a href="tutorial-data-voorbereiden.html#cb182-11" aria-hidden="true" tabindex="-1"></a>  )) <span class="ot">-&gt;</span> survey</span></code></pre></div>
<p>Onze grafiek ziet er nu als volgt uit. Beter, is het niet? [^beter]</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="tutorial-data-voorbereiden.html#cb183-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb183-2"><a href="tutorial-data-voorbereiden.html#cb183-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(party)) <span class="sc">+</span></span>
<span id="cb183-3"><a href="tutorial-data-voorbereiden.html#cb183-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">fill =</span> <span class="st">&quot;dodgerblue4&quot;</span>) <span class="sc">+</span></span>
<span id="cb183-4"><a href="tutorial-data-voorbereiden.html#cb183-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb183-5"><a href="tutorial-data-voorbereiden.html#cb183-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-170-1.png" width="100%" /></p>
<p>In conclusie: gebruiken we</p>
<ul>
<li><code>fct_recode</code> voor het hercoderen van waarden van een categorische variabele, en</li>
<li><code>fct_relevel</code> voor het handmatig herordenen van waarden van een categorische variabele.</li>
</ul>
<p>Later zullen we meer specifieke functies zien voor het hercoderen en herordenen van categorische variabelen bij het transformeren van gegevens (niet omdat er fouten zijn, maar omdat ze onze analyse daarmee kunnen verbeteren). Zorg ervoor dat je het overzicht niet verliest! Eerst kijken we naar het opschonen van continue gegevens.</p>
</div>
</div>
<div id="cleaning-continue-variabelen" class="section level3" number="8.4.3">
<h3><span class="header-section-number">8.4.3</span> Cleaning continue variabelen</h3>
<p>Voor continue gegevens is het bereik van mogelijke waarden oneindig, en is het dus moeilijker <em>foute</em> waarden te vinden. Zonder informatie over de context van de gegevens is het vinden van foute continue waarden uiterst moeilijk.</p>
<div id="fouten" class="section level4" number="8.4.3.1">
<h4><span class="header-section-number">8.4.3.1</span> Fouten</h4>
<p>In het <code>survey</code> data.frame, zijn er drie continue variabelen: jaar, leeftijd en (dagelijkse) tv_hours. Voor elk van deze variabelen hebben we een idee over het mogelijke bereik van waarden. De leeftijd zal waarschijnlijk ergens tussen 20 en 100 liggen (wetende dat de dataset informatie over volwassenen bevat). Het aantal tv-uren moet tussen 0 en 24 liggen, aangezien er 24 uur in een dag zitten. Ook voor het jaar weten we min of meer wat we kunnen verwachten. Laten we eens kijken naar elk.<a href="#fn31" class="footnote-ref" id="fnref31"><sup>31</sup></a></p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="tutorial-data-voorbereiden.html#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(survey<span class="sc">$</span>year)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    2000    2002    2006    2007    2010    2014</code></pre>
<p>Voor het jaar, lijkt alles in orde. We hebben het al eerder omgezet in een gehele variabele, dus we hoeven niet te controleren op foutieve decimale jaren. Ook het minimum en maximum lijken in orde. Als het jaar fouten bevat, zien we dat waarschijnlijk in deze extremen: 2102 in plaats van 2012, 1099 in plaats van 1999, of bv. 9999 wat aangeeft dat het eigenlijk ontbreekt.</p>
<p>Laten we dan eens kijken naar leeftijd.</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="tutorial-data-voorbereiden.html#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(survey<span class="sc">$</span>age)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##   18.00   33.00   46.00   47.18   59.00   89.00      76</code></pre>
<p>Op het eerste gezicht lijken er ook geen problemen te zijn met de leeftijd. Er zijn 76 ontbrekende waarden, maar de aanwezige waarden liggen tussen 18 en 89 jaar, wat ook weer een logisch bereik is. Ook leeftijd werd eerder zonder problemen omgezet in een gehele variabele, zodat alle waarden gehele getallen zijn.</p>
<p>Als we naar de tv-uren kijken, zien we iets eigenaardigs.</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="tutorial-data-voorbereiden.html#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(survey<span class="sc">$</span>tv_hours)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##   0.000   1.000   2.000   3.004   4.000  84.000   10146</code></pre>
<p>We zien dat er 10146 ontbrekende waarden zijn, wat hoog is maar niet noodzakelijk verkeerd (tenzij we per ongeluk enkele waarden hebben verwijderd, wat we niet hebben gedaan). Er zijn geen negatieve waarden, aangezien het minimumaantal uren dat iemand tv heeft gekeken nul is. Aan de andere kant zien we echter dat het aantal tv-uren oploopt tot 84 uur per dag - dit is duidelijk verkeerd. We hebben allemaal maar 24 uur in een dag.</p>
<p>We kunnen verder kijken naar de records waarvoor de tv-uren meer dan 24 zijn.</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="tutorial-data-voorbereiden.html#cb190-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb190-2"><a href="tutorial-data-voorbereiden.html#cb190-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(tv_hours <span class="sc">&gt;</span> <span class="dv">24</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 9
##    year marital   age race  reported_income party religion denomination tv_hours
##   &lt;int&gt; &lt;fct&gt;   &lt;int&gt; &lt;fct&gt; &lt;fct&gt;           &lt;fct&gt; &lt;fct&gt;    &lt;fct&gt;           &lt;dbl&gt;
## 1  2000 Married    84 White Not applicable  Inde~ Protest~ No denomina~       28
## 2  2000 Widowed    68 White Not applicable  Inde~ Protest~ Other luthe~       84
## 3  2010 Married    69 White Not applicable  Demo~ Protest~ Baptist-dk ~       35
## 4  2010 Divorc~    57 White Not applicable  Demo~ Catholic Not applica~       56
## 5  2014 Separa~    30 White Not applicable  Inde~ None     Not applica~       28</code></pre>
<p>Er blijken 5 waarnemingen te zijn waarvoor het aantal tv-uren duidelijk fout is, en die moeten we corrigeren. We hebben echter geen idee hoe we dat in ons geval moeten doen. Het enige wat we kunnen doen, is deze waarden schrappen, en ze missing maken.<a href="#fn32" class="footnote-ref" id="fnref32"><sup>32</sup></a> Let op, we verwijderen niet de volledige waarnemingen, alleen de tvhours variabele voor deze waarnemingen. De andere variabelen kunnen nog steeds worden gebruikt voor deze 5 rijen.</p>
<p>In sommige gevallen kan je proberen te achterhalen wat de fout is. Als het gaat over de lengte van personen zijn er mogelijke enkele waarden in meter uitgedrukt, en de rest in centimeter? Misschien is er sprake van verschillende eenheden (meter vs feet, km vs mile). Anders kan je in werkelijkheid ook proberen teruggaan naar de bron van de data, of de domein expert, om te achterhalen wat er mis is. Als al deze acties geen opheldering bieden, zit er niets anders op dan de waarden te verwijderen.</p>
<p>We kunnen dit doen door gebruik te maken van de <code>ifelse</code> functie. Deze functie is een zeer algemene functie die een waarde teruggeeft die afhankelijk is van een logische test.<a href="#fn33" class="footnote-ref" id="fnref33"><sup>33</sup></a> De functie kan als volgt worden gebruikt.</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="tutorial-data-voorbereiden.html#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="fu">if_else</span>( <span class="sc">&lt;</span>condition<span class="sc">&gt;</span>, <span class="sc">&lt;</span>value_a<span class="sc">&gt;</span>, <span class="sc">&lt;</span>value_b<span class="sc">&gt;</span> )</span></code></pre></div>
<p>Stel, we hebben een vector <code>score</code> die leerlingenscores bevat. We kunnen de <code>ifelse</code> functie gebruiken om een vector <code>grade</code> te maken met de waarden <code>FAILED</code> en <code>PASSED</code>.</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="tutorial-data-voorbereiden.html#cb193-1" aria-hidden="true" tabindex="-1"></a>grade <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(score <span class="sc">&gt;=</span> <span class="dv">10</span>, <span class="st">&quot;PASSED&quot;</span>, <span class="st">&quot;FAILED&quot;</span>)</span></code></pre></div>
<p>In onze situaties is de vector die we willen aanpassen een kolom in een dataframe, dus we gebruiken mutate om dit te doen. Laten we de functie gebruiken om de variabele tv-uren bij te werken.</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="tutorial-data-voorbereiden.html#cb194-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb194-2"><a href="tutorial-data-voorbereiden.html#cb194-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tv_hours =</span> <span class="fu">ifelse</span>(tv_hours <span class="sc">&gt;</span> <span class="dv">24</span>, <span class="cn">NA</span>, tv_hours)) <span class="ot">-&gt;</span> survey</span></code></pre></div>
<p>Dus, wat gebeurt er? De variabele tv_hours wordt bijgewerkt met <code>mutate</code>. Als deze groter is dan 24, is de nieuwe waarde <code>NA</code>, d.w.z. Not Available, missing. Anders is de nieuwe waarde gewoon de oude waarde van tv_hours, d.w.z. ongewijzigd. Nadat de kolom is bijgewerkt, wordt het nieuwe data.frame weer opgeslagen als <code>survey</code>.</p>
<p>Het controleren op fouten, zowel categorische als continue, kan een <em>straat zonder einde</em> zijn. Meestal doe je je uiterste best door voor elke variabele de hierboven besproken testen toe te passen tijdens je beschrijvende analyse. Als dit veel werk lijkt, bedenk dan dat een doorsnee dataproject voor 70% bestaat uit het opschonen en transformeren van gegevens, en voor slechts 30% uit de eigenlijke analyse en interpretatie.</p>
<p>En zelfs dan kan het gebeuren dat je, ondanks al je tijd en inspanningen, in de analysefase fouten in de gegevens ontdekt. Dat is niet verwonderlijk, want op dat moment ga je de gegevens echt in detail bekijken. Wanneer dit gebeurt, ga je terug naar uw cleaning- en transformatiescripts en pas je ze aan waar nodig. Het is dus belangrijk dat je zowel de oorspronkelijke gegevens als alle wijzigingen die je hebt aangebracht, bewaart. Nog belangrijker is het om ervoor te zorgen dat al je analyses worden opgeslagen als een script van RMarkdown, zodat ze snel opnieuw kunnen worden uitgevoerd na het corrigeren van de fout. Dit heet <em>reproducible research</em> en zal je veel tijd en fouten besparen. Kijk eens naar <a href="https://www.youtube.com/watch?v=s3JldKoA0zw">deze video</a> voor een illustratie van reproduceerbare work-flows.</p>
</div>
<div id="outliers" class="section level4" number="8.4.3.2">
<h4><span class="header-section-number">8.4.3.2</span> Outliers</h4>
<p>Het komt ook voor dat sommige continue waarden niet noodzakelijk fout zijn, maar <em>uitzonderlijk</em> hoog of laag. Deze uitzonderingen noemen we geen fouten, maar outliers – een gegevenspunt dat ver af ligt van andere waarnemingen. Neem bijvoorbeeld tv-uren. Eerder verwijderden we de waarden groter dan 24 uur, omdat daar logischerwijze fouten in zitten. Laten we eens kijken naar de resterende waarden.</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="tutorial-data-voorbereiden.html#cb195-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb195-2"><a href="tutorial-data-voorbereiden.html#cb195-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(tv_hours)) <span class="sc">+</span></span>
<span id="cb195-3"><a href="tutorial-data-voorbereiden.html#cb195-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(</span>
<span id="cb195-4"><a href="tutorial-data-voorbereiden.html#cb195-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">binwidth =</span> <span class="dv">1</span>,</span>
<span id="cb195-5"><a href="tutorial-data-voorbereiden.html#cb195-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;dodgerblue4&quot;</span></span>
<span id="cb195-6"><a href="tutorial-data-voorbereiden.html#cb195-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb195-7"><a href="tutorial-data-voorbereiden.html#cb195-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-178-1.png" width="100%" /></p>
<p>Het lijkt erop dat, hoewel de meeste mensen tussen 0 en 5 uur per dag televisie kijken, er enkele uitzonderlijk hoge waarden zijn. Het is niet duidelijk of het hier gaat om vergissingen zoals we die eerder hebben verwijderd, of gewoon om abnormale tv-verslaafden. Laten we eens kijken naar de 25 hoogste waarden, en ze vergelijken met enkele verwante attributen, zoals leeftijd, inkomen en burgerlijke staat (ze vergelijken met godsdienst of partij zou kunnen worden beschouwd als politiek incorrect, dus laten we uit die gevarenzone weg blijven).<a href="#fn34" class="footnote-ref" id="fnref34"><sup>34</sup></a></p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="tutorial-data-voorbereiden.html#cb196-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb196-2"><a href="tutorial-data-voorbereiden.html#cb196-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>tv_hours) <span class="sc">%&gt;%</span></span>
<span id="cb196-3"><a href="tutorial-data-voorbereiden.html#cb196-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">25</span>) <span class="sc">%&gt;%</span></span>
<span id="cb196-4"><a href="tutorial-data-voorbereiden.html#cb196-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(tv_hours, marital, age, reported_income) <span class="sc">%&gt;%</span></span>
<span id="cb196-5"><a href="tutorial-data-voorbereiden.html#cb196-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pander</span>()</span></code></pre></div>
<table style="width:71%;">
<colgroup>
<col width="15%" />
<col width="22%" />
<col width="8%" />
<col width="25%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">tv_hours</th>
<th align="center">marital</th>
<th align="center">age</th>
<th align="center">reported_income</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">24</td>
<td align="center">Never married</td>
<td align="center">30</td>
<td align="center">Not applicable</td>
</tr>
<tr class="even">
<td align="center">24</td>
<td align="center">Separated</td>
<td align="center">45</td>
<td align="center">Not applicable</td>
</tr>
<tr class="odd">
<td align="center">24</td>
<td align="center">Never married</td>
<td align="center">33</td>
<td align="center">$6000 to 6999</td>
</tr>
<tr class="even">
<td align="center">24</td>
<td align="center">Divorced</td>
<td align="center">53</td>
<td align="center">Not applicable</td>
</tr>
<tr class="odd">
<td align="center">24</td>
<td align="center">Divorced</td>
<td align="center">50</td>
<td align="center">No answer</td>
</tr>
<tr class="even">
<td align="center">24</td>
<td align="center">Never married</td>
<td align="center">44</td>
<td align="center">Not applicable</td>
</tr>
<tr class="odd">
<td align="center">24</td>
<td align="center">Never married</td>
<td align="center">21</td>
<td align="center">Don’t know</td>
</tr>
<tr class="even">
<td align="center">24</td>
<td align="center">Widowed</td>
<td align="center">71</td>
<td align="center">Not applicable</td>
</tr>
<tr class="odd">
<td align="center">24</td>
<td align="center">Widowed</td>
<td align="center">62</td>
<td align="center">Not applicable</td>
</tr>
<tr class="even">
<td align="center">24</td>
<td align="center">Widowed</td>
<td align="center">52</td>
<td align="center">Refused</td>
</tr>
<tr class="odd">
<td align="center">24</td>
<td align="center">Never married</td>
<td align="center">56</td>
<td align="center">Not applicable</td>
</tr>
<tr class="even">
<td align="center">24</td>
<td align="center">Divorced</td>
<td align="center">51</td>
<td align="center">Not applicable</td>
</tr>
<tr class="odd">
<td align="center">24</td>
<td align="center">Divorced</td>
<td align="center">75</td>
<td align="center">Not applicable</td>
</tr>
<tr class="even">
<td align="center">24</td>
<td align="center">Separated</td>
<td align="center">49</td>
<td align="center">$8000 to 9999</td>
</tr>
<tr class="odd">
<td align="center">24</td>
<td align="center">Divorced</td>
<td align="center">65</td>
<td align="center">Not applicable</td>
</tr>
<tr class="even">
<td align="center">24</td>
<td align="center">Never married</td>
<td align="center">27</td>
<td align="center">Not applicable</td>
</tr>
<tr class="odd">
<td align="center">24</td>
<td align="center">Married</td>
<td align="center">71</td>
<td align="center">Not applicable</td>
</tr>
<tr class="even">
<td align="center">24</td>
<td align="center">Never married</td>
<td align="center">27</td>
<td align="center">$8000 to 9999</td>
</tr>
<tr class="odd">
<td align="center">24</td>
<td align="center">Separated</td>
<td align="center">63</td>
<td align="center">Not applicable</td>
</tr>
<tr class="even">
<td align="center">24</td>
<td align="center">Divorced</td>
<td align="center">31</td>
<td align="center">$5000 to 5999</td>
</tr>
<tr class="odd">
<td align="center">24</td>
<td align="center">Separated</td>
<td align="center">37</td>
<td align="center">Not applicable</td>
</tr>
<tr class="even">
<td align="center">24</td>
<td align="center">Married</td>
<td align="center">46</td>
<td align="center">Not applicable</td>
</tr>
<tr class="odd">
<td align="center">23</td>
<td align="center">Never married</td>
<td align="center">32</td>
<td align="center">Not applicable</td>
</tr>
<tr class="even">
<td align="center">22</td>
<td align="center">Divorced</td>
<td align="center">69</td>
<td align="center">Not applicable</td>
</tr>
<tr class="odd">
<td align="center">22</td>
<td align="center">Married</td>
<td align="center">63</td>
<td align="center">Not applicable</td>
</tr>
</tbody>
</table>
<p>Het lijkt erop dat veel van de respondenten elke dag het maximumaantal van 24 uur tv kijken, wat verrassend is. We kunnen de andere variabelen gebruiken om een beter beeld te krijgen van deze waarnemingen. We zien dat velen van hen alleenstaand zijn (nooit getrouwd, gescheiden of gescheiden). De leeftijd lijkt relatief hoog te zijn, maar niet erg opmerkelijk (de gemiddelde leeftijd voor de dataset was ongeveer 47 jaar). Ten slotte hebben velen hun inkomen niet gerapporteerd.</p>
<p>Deze informatie kan op verschillende manieren geïnterpreteerd worden:</p>
<ul>
<li>Dit zijn alleenstaande, luie mensen met een inkomen die de hele dag tv kijken</li>
<li>Dit zijn mensen die niet erg eerlijk waren bij het invullen van hun informatie (ook geen inkomen opgeven).</li>
</ul>
<p>Beslissen of iets fout of uitzonderlijk is, is niet triviaal en vereist bepaalde domeinkennis en aannames. In dit geval is de logische aanname dat deze cijfers onjuist zijn (zelfs luie, tv-verslaafde mensen moeten af en toe slapen). De moeilijkere vraag is op welk punt iets onjuist wordt. 20 uur? 16? Voor continue variabelen kan het helpen om naar een boxplot te kijken en te zien tot waar de whiskers gaan. Dit is echter geen exacte wetenschap, vooral wanneer variabelen niet symmetrisch verdeeld zijn.</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="tutorial-data-voorbereiden.html#cb197-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb197-2"><a href="tutorial-data-voorbereiden.html#cb197-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="st">&quot;&quot;</span>, tv_hours)) <span class="sc">+</span></span>
<span id="cb197-3"><a href="tutorial-data-voorbereiden.html#cb197-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-180-1.png" width="100%" /></p>
<p>Voor het huidige geval kunnen we zeggen dat de mensen die meer dan 8 uur tv kijken ofwel een onjuist getal hebben ingevuld, ofwel uitzonderlijke tv-kijkers zijn. Daarom verwijderen we alle waarden hoger dan 8.</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="tutorial-data-voorbereiden.html#cb198-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb198-2"><a href="tutorial-data-voorbereiden.html#cb198-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tv_hours =</span> <span class="fu">ifelse</span>(tv_hours <span class="sc">&gt;</span> <span class="dv">8</span>, <span class="cn">NA</span>, tv_hours)) <span class="ot">-&gt;</span> survey</span></code></pre></div>
</div>
</div>
<div id="data-inconsistenties" class="section level3" number="8.4.4">
<h3><span class="header-section-number">8.4.4</span> Data inconsistenties</h3>
<p>Een andere manier om op fouten te controleren is meer dan één variabele tegelijk te bekijken, en te controleren op duidelijke inconsistenties. Dit kunnen we zien als “regels” die worden overtreden. In de huidige dataset zouden we kunnen nagaan of alle gehuwde personen minstens 18 jaar oud moeten zijn. Aangezien alle waarnemingen mensen betreffen die minstens 18 jaar oud zijn, weten we dat deze regel niet geschonden is.
Bijvoorbeeld regels in andere gevallen kunnen zijn:</p>
<ul>
<li>het vertrek van een vlucht moet plaatsvinden voordat deze kan aankomen. (Rekening houdend met verschillende tijdzones, uiteraard.)</li>
<li>iemand wiens werkstatus “werkloos” is, kan geen gemeld inkomen hebben (tenzij rekening wordt gehouden met werkloosheidsuitkeringen).</li>
<li>enz.</li>
</ul>
<p>M.a.w., we gebruiken onze kennis over de variabelen en hun onderlinge verhoudingen om te kijken of er opvallende observaties zijn, die we desnoods moeten aanpassen.</p>
<p>Vaak zult u geen tijd hebben om alle mogelijke regels die je kunt bedenken te controleren. Bovendien zullen sommige regels gebaseerd zijn op bepaalde veronderstellingen die je moet controleren. Bijvoorbeeld, de <a href="https://en.wikipedia.org/wiki/Marriageable_age">leeftijd waarop men kan trouwen</a> hangt af van het land, en kan dus lager of hoger zijn dan 18.</p>
</div>
<div id="missing-values" class="section level3" number="8.4.5">
<h3><span class="header-section-number">8.4.5</span> Missing values</h3>
<p>In het echte leven worden gegevens meestal geleverd met ontbrekende waarden. De waarden kunnen ontbreken aan de start, of ze kunnen ontbreken omdat we ze verwijderd hebben als outliers of verkeerde waarden. In de volgende paragrafen zullen we zien hoe we ontbrekende waarden kunnen analyseren – bv. ontbreken ze willekeurig of niet? – en hoe ze te behandelen tijdens je analyse. Wij zijn verplicht te zeggen dat er ook technieken zijn die kunnen worden gebruikt om ontbrekende waarden te <em>schatten</em> op basis van de waarden voor andere attributen en andere waarnemingen met soortgelijke waarden. Dit wordt missing value <em>imputation</em> genoemd en is een apart veld op zich. Vanwege de complexiteit ervan zullen we het er hier niet over hebben, maar de geïnteresseerde lezer wordt verwezen naar <a href="https://datascienceplus.com/imputing-missing-data-with-r-mice-package/">deze handleiding van het mice-pakket</a>.</p>
<div id="analyseren-missing-data" class="section level4" number="8.4.5.1">
<h4><span class="header-section-number">8.4.5.1</span> Analyseren missing data</h4>
<p>Er zijn drie verschillende manieren waarop ontbrekende gegevens kunnen voorkomen (zie theorie).</p>
<ul>
<li>Volledig willekeurig ontbrekend (MCAR)</li>
<li>Willekeurig ontbrekend (MAR)</li>
<li>Niet willekeurig ontbrekend (NMAR)</li>
</ul>
<p>Hieronder illustreren we enkele technieken om de ontbrekende waarden in je gegevens te analyseren. De meest voor de hand liggende manier om na te gaan of je gegevens ontbrekende waarden bevatten is door naar de samenvatting te kijken.</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="tutorial-data-voorbereiden.html#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(survey)</span></code></pre></div>
<pre><code>##       year               marital           age           race      
##  Min.   :2000   Divorced     : 3383   Min.   :18.00   Black: 3129  
##  1st Qu.:2002   Married      :10117   1st Qu.:33.00   Other: 1959  
##  Median :2006   Never married: 5416   Median :46.00   White:16395  
##  Mean   :2007   No answer    :   17   Mean   :47.18                
##  3rd Qu.:2010   Separated    :  743   3rd Qu.:59.00                
##  Max.   :2014   Widowed      : 1807   Max.   :89.00                
##                                       NA&#39;s   :76                   
##        reported_income                   party            religion    
##  $25000 or more:7363   Independent          :4119   Protestant:10846  
##  Not applicable:7043   Democrat, weak       :3690   Catholic  : 5124  
##  $20000 - 24999:1283   Democrat, strong     :3490   None      : 3523  
##  $10000 - 14999:1168   Republican, weak     :3032   Christian :  689  
##  $15000 - 19999:1048   Independent, near dem:2499   Jewish    :  388  
##  Refused       : 975   Republican, strong   :2314   Other     :  224  
##  (Other)       :2603   (Other)              :2339   (Other)   :  689  
##            denomination      tv_hours    
##  Not applicable  :10072   Min.   :0.000  
##  Other           : 2534   1st Qu.:1.000  
##  No denomination : 1683   Median :2.000  
##  Southern baptist: 1536   Mean   :2.659  
##  Baptist-dk which: 1457   3rd Qu.:4.000  
##  United methodist: 1067   Max.   :8.000  
##  (Other)         : 3134   NA&#39;s   :10509</code></pre>
<p>Dit vertelt ons voor welke variabelen er ontbrekende gegevens zijn, en hoeveel. Het zegt ons echter niets over de relaties tussen ontbrekende waarden. Om naar <em>patronen</em> van ontbrekende gegevens te kijken, kunnen we gebruik maken van de <code>md.pattern</code> functie (missing data patterns) uit het pakket <code>mice</code>.</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="tutorial-data-voorbereiden.html#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="fu">md.pattern</span>(survey)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-183-1.png" width="100%" /></p>
<pre><code>##       year marital race reported_income party religion denomination age
## 10936    1       1    1               1     1        1            1   1
## 10471    1       1    1               1     1        1            1   1
## 38       1       1    1               1     1        1            1   0
## 38       1       1    1               1     1        1            1   0
##          0       0    0               0     0        0            0  76
##       tv_hours      
## 10936        1     0
## 10471        0     1
## 38           1     1
## 38           0     2
##          10509 10585</code></pre>
<p>De uitvoer van <code>md.pattern</code> is een beetje cryptisch, maar laten we eens wat beter kijken. Elke kolom verwijst naar een van de variabelen, zoals is aangegeven. Elke rij is een <em>patroon</em> bestaande uit 1’en (gegevens ontbreken niet) en 0’en (gegevens ontbreken wel). De eerste rij, waarin alle variabelen een 1 hebben, is een patroon waarin geen van de variabelen ontbreekt. Dit wordt ook aangeduid door de nul in de laatste kolom. In de tweede rij wordt tv hours aangegeven met een nul, wat betekent dat voor dit patroon de variabele tv_hours ontbreekt. De laatste kolom geeft dus 1 ontbrekende waarde aan. Het laatste patroon is er een met 2 ontbrekende waarden, zoals aangegeven in de laatste kolom. Met name leeftijd en tv-uren ontbreken.</p>
<p>Het getal in de eerste kolom geeft aan hoeveel waarnemingen van elk patroon er zijn. Op die manier heeft het eerste patroon de meeste waarnemingen – 10936 personen zonder ontbrekende gegevens. Het laatste patroon (tv-uren en leeftijd ontbreken) komt 38 keer voor. De laatste rij is gelijk aan het aantal ontbrekende waarden voor elke variabele (dezelfde informatie die de samenvatting ons gaf). Tenslotte is het getal in de rechter benedenhoek het totaal aantal ontbrekende waarden.</p>
<p>De uitvoer van md.patterns (welke zowel een tabel als een visuele weergave is) kan ons tonen of het voorkomen van ontbrekende waarden met elkaar verband houdt. Bijvoorbeeld, als leeftijd ontbreekt, dan ontbreekt tv-uur ook? Dat laatste is niet het geval, want er zijn evenveel waarnemingen waar leeftijd ontbreekt en tv-uren niet, als waarnemingen waar leeftijd én tv-uren ontbreekt.</p>
<p>Naast <code>md.pattern</code> kunnen we ook nagaan of het voorkomen van ontbrekende waarden samenhangt met de <em>waarde</em> voor andere variabelen. Zo kunnen we ons afvragen of mensen van bepaalde religies of politieke voorkeuren meer of minder kans hebben om hun leeftijd of het aantal uren dat ze tv kijken op te geven. Deze patronen kunnen gecontroleerd worden met ggplot/dplyr, door een nieuwe variabele te creëren die aangeeft of een waarneming een ontbrekende waarde heeft of niet.</p>
<p>Laten we eens kijken naar leeftijd. We voegen een variabele toe die aangeeft of leeftijd al dan niet ontbreekt. Merk op dat om dit te controleren, we een speciale functie nodig hebben. We kunnen age == NA niet gebruiken om te zien of leeftijd ontbreekt. In de laatste voorwaarde vergelijken we leeftijd met NA, d.w.z. we vergelijken leeftijd met iets dat we niet hebben. We kunnen nooit weten of leeftijd gelijk is aan iets dat we niet hebben, dus het resultaat daarvan is altijd NA, ongeacht de waarde van leeftijd. Neem als voorbeeld de variabelen a en b, waarvan a ontbreekt en b niet.</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="tutorial-data-voorbereiden.html#cb203-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb203-2"><a href="tutorial-data-voorbereiden.html#cb203-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb203-3"><a href="tutorial-data-voorbereiden.html#cb203-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-4"><a href="tutorial-data-voorbereiden.html#cb203-4" aria-hidden="true" tabindex="-1"></a>a <span class="sc">==</span> <span class="cn">NA</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="tutorial-data-voorbereiden.html#cb205-1" aria-hidden="true" tabindex="-1"></a>b <span class="sc">==</span> <span class="cn">NA</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>Beide logische condities geven NA terug, in plaats van de verwachte TRUE en FALSE.</p>
<p>Dus, hoe controleren we of iets NA is? Daar gebruiken we de speciale functie <code>is.na</code> voor.</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="tutorial-data-voorbereiden.html#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(a)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="tutorial-data-voorbereiden.html#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(b)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Dus, voor de survey data:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="tutorial-data-voorbereiden.html#cb211-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb211-2"><a href="tutorial-data-voorbereiden.html#cb211-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb211-3"><a href="tutorial-data-voorbereiden.html#cb211-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_missing =</span> <span class="fu">is.na</span>(age),</span>
<span id="cb211-4"><a href="tutorial-data-voorbereiden.html#cb211-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">tv_missing =</span> <span class="fu">is.na</span>(tv_hours)</span>
<span id="cb211-5"><a href="tutorial-data-voorbereiden.html#cb211-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="ot">-&gt;</span> survey_md</span></code></pre></div>
<p>Merk op dat wij het data.frame met de bijkomende variabelen onder een andere naam opslaan, aangezien wij deze variabelen in de uiteindelijke analysefase niet nodig zullen hebben, alleen om de ontbrekende gegevens voorlopig te bekijken.</p>
<p>Wanneer we de ontbrekende/niet-ontbrekende variabele vergelijken met een categorische variabele, hebben wij in feite 2 categorische variabelen. We kunnen dus een grafiek of tabel gebruiken die geschikt is voor het vergelijken van categorische variabelen. Zoals we nu allemaal (zouden moeten) weten, kunnen we een staafdiagram gebruiken.</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="tutorial-data-voorbereiden.html#cb212-1" aria-hidden="true" tabindex="-1"></a>survey_md <span class="sc">%&gt;%</span></span>
<span id="cb212-2"><a href="tutorial-data-voorbereiden.html#cb212-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(reported_income, <span class="at">fill =</span> age_missing)) <span class="sc">+</span></span>
<span id="cb212-3"><a href="tutorial-data-voorbereiden.html#cb212-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">&quot;fill&quot;</span>) <span class="sc">+</span></span>
<span id="cb212-4"><a href="tutorial-data-voorbereiden.html#cb212-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-187-1.png" width="100%" /></p>
<p>Uit het staafdiagram blijkt dat mensen die hun inkomen niet hebben opgegeven, vaker ook hun leeftijd niet hebben opgegeven.<a href="#fn35" class="footnote-ref" id="fnref35"><sup>35</sup></a></p>
<p>We kunnen hetzelfde doen voor tv-uren. We zien dan dat het percentage ontbrekende waarden varieert - iets hoger of lager voor bepaalde inkomens - maar dat er geen duidelijke patronen zijn.</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="tutorial-data-voorbereiden.html#cb213-1" aria-hidden="true" tabindex="-1"></a>survey_md <span class="sc">%&gt;%</span></span>
<span id="cb213-2"><a href="tutorial-data-voorbereiden.html#cb213-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(reported_income, <span class="at">fill =</span> tv_missing)) <span class="sc">+</span></span>
<span id="cb213-3"><a href="tutorial-data-voorbereiden.html#cb213-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">&quot;fill&quot;</span>) <span class="sc">+</span></span>
<span id="cb213-4"><a href="tutorial-data-voorbereiden.html#cb213-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-188-1.png" width="100%" /></p>
<p>Natuurlijk kan het voorkomen van ontbrekende waarden worden vergeleken met meer dan één variabele, niet alleen inkomen. Hieronder tonen we de vergelijking van ontbrekende tv-uren met politieke voorkeur. Hier zien we duidelijk dat er slechts één antwoord is voor politieke partij dat alleen werd gebruikt voor waarnemingen waarbij de tv-uren niet ontbraken. Voor de andere politieke voorkeur-waarden is er geen duidelijk verband met het missing zijn van tvhours.</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="tutorial-data-voorbereiden.html#cb214-1" aria-hidden="true" tabindex="-1"></a>survey_md <span class="sc">%&gt;%</span></span>
<span id="cb214-2"><a href="tutorial-data-voorbereiden.html#cb214-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(party, <span class="at">fill =</span> tv_missing)) <span class="sc">+</span></span>
<span id="cb214-3"><a href="tutorial-data-voorbereiden.html#cb214-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">&quot;fill&quot;</span>) <span class="sc">+</span></span>
<span id="cb214-4"><a href="tutorial-data-voorbereiden.html#cb214-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-189-1.png" width="100%" /></p>
<p>Als laatste voorbeeld kunnen we het ontbreken van het aantal tv-uren vergelijken met een continue variabele, laten we zeggen leeftijd. Zijn mensen die het aantal uren dat ze tv kijken niet hebben gerapporteerd over het algemeen ouder of jonger? De boxplots hieronder laten geen verschil zien.</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="tutorial-data-voorbereiden.html#cb215-1" aria-hidden="true" tabindex="-1"></a>survey_md <span class="sc">%&gt;%</span></span>
<span id="cb215-2"><a href="tutorial-data-voorbereiden.html#cb215-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(tv_missing, age, <span class="at">color =</span> tv_missing)) <span class="sc">+</span></span>
<span id="cb215-3"><a href="tutorial-data-voorbereiden.html#cb215-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-190-1.png" width="100%" /></p>
<p>Hoeveel vergelijkingen u maakt voor elke variabele waarvoor gegevens ontbreken, is aan jou – maar je moet redelijk bewijs verzamelen of de ontbrekende waarden MAR, MCAR of NMAR zijn.</p>
</div>
<div id="werken-met-missing-data" class="section level4" number="8.4.5.2">
<h4><span class="header-section-number">8.4.5.2</span> Werken met missing data</h4>
<p>Hoewel we niet zullen zien hoe we ontbrekende waarden kunnen imputeren - <em>inschatten</em> -, is het toch belangrijk te weten hoe we ermee moeten werken.</p>
<p>Ten eerste, denk aan visualisaties. Wanneer we met ggplot werken, zullen ontbrekende waarden vaak automatisch genegeerd worden. Wanneer we bijvoorbeeld een histogram van de leeftijd proberen te maken, zal ggplot ons via een waarschuwing vertellen dat het enkele ontbrekende waarden negeerde.</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="tutorial-data-voorbereiden.html#cb216-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb216-2"><a href="tutorial-data-voorbereiden.html#cb216-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(age)) <span class="sc">+</span></span>
<span id="cb216-3"><a href="tutorial-data-voorbereiden.html#cb216-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>, <span class="at">fill =</span> <span class="st">&quot;dodgerblue4&quot;</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb216-4"><a href="tutorial-data-voorbereiden.html#cb216-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 76 rows containing non-finite values (stat_bin).</code></pre>
<p><img src="textbook_files/figure-html/unnamed-chunk-191-1.png" width="100%" /></p>
<p>De waarschuwing</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="tutorial-data-voorbereiden.html#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Warning: Removed 76 rows containing non-finite values (stat_bin).</span></span></code></pre></div>
<p>vertelt ons wanneer en hoeveel ontbrekende waarden worden genegeerd.
In het geval dat een categorische variabele ontbrekende waarden heeft, zal NA verschijnen als een aparte categorie. Neem bijvoorbeeld de dataset survey2 (die we hier even als voorbeeld zullen gebruiken), die ontbrekende waarden heeft voor verscheidene variabelen.</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="tutorial-data-voorbereiden.html#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(survey2)</span></code></pre></div>
<pre><code>##       age                  denomination           marital    
##  Min.   :18.00   Not applicable  :9960   Divorced     :3351  
##  1st Qu.:33.00   Other           :2508   Married      :9999  
##  Median :46.00   No denomination :1665   Never married:5359  
##  Mean   :47.18   Southern baptist:1521   No answer    :  17  
##  3rd Qu.:59.00   Baptist-dk which:1439   Separated    : 738  
##  Max.   :89.00   (Other)         :4159   Widowed      :1788  
##  NA&#39;s   :280     NA&#39;s            : 231   NA&#39;s         : 231  
##                    party         race             religion    
##  Independent          :4080   Black: 3098   Protestant:10733  
##  Democrat, weak       :3658   Other: 1941   Catholic  : 5066  
##  Democrat, strong     :3453   White:16226   None      : 3485  
##  Republican, weak     :2997   NA&#39;s :  218   Christian :  685  
##  Independent, near dem:2479                 Jewish    :  384  
##  (Other)              :4604                 (Other)   :  902  
##  NA&#39;s                 : 212                 NA&#39;s      :  228  
##        reported_income    tv_hours          year     
##  $25000 or more:7294   Min.   :0.000   Min.   :2000  
##  Not applicable:6973   1st Qu.:1.000   1st Qu.:2002  
##  $20000 - 24999:1274   Median :2.000   Median :2006  
##  $10000 - 14999:1159   Mean   :2.659   Mean   :2006  
##  $15000 - 19999:1034   3rd Qu.:4.000   3rd Qu.:2010  
##  (Other)       :3544   Max.   :8.000   Max.   :2014  
##  NA&#39;s          : 205   NA&#39;s   :10596   NA&#39;s   :206</code></pre>
<p>Laten we zeggen dat we een staafdiagram maken van de variabele godsdienst. De waarde NA verschijnt dan als een aparte categorie en krijgt zijn eigen staaf. Automatisch zal deze categorie worden uitgezet naast de andere, niet ertussen.</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="tutorial-data-voorbereiden.html#cb221-1" aria-hidden="true" tabindex="-1"></a>survey2 <span class="sc">%&gt;%</span></span>
<span id="cb221-2"><a href="tutorial-data-voorbereiden.html#cb221-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(religion)) <span class="sc">+</span></span>
<span id="cb221-3"><a href="tutorial-data-voorbereiden.html#cb221-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb221-4"><a href="tutorial-data-voorbereiden.html#cb221-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-195-1.png" width="100%" /></p>
<p>Als dusdanig behandelt ggplot ontbrekende waarden zonder probleem en vrij transparant. Hetzelfde is niet waar wanneer we naar numerieke berekeningen gaan.</p>
<p>Laten we beginnen met het goede nieuws. Als wij een frequentietabel maken van een categorische waarde met ontbrekende waarden, zullen de NA’s net zo worden beschouwd als elke andere waarde. Wij kunnen bijvoorbeeld een frequentietabel maken ter ondersteuning van de bovenstaande grafiek voor survey2. NA wordt zelfs meegesorteerd door onze arrange in dit geval.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="tutorial-data-voorbereiden.html#cb222-1" aria-hidden="true" tabindex="-1"></a>survey2 <span class="sc">%&gt;%</span></span>
<span id="cb222-2"><a href="tutorial-data-voorbereiden.html#cb222-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(religion) <span class="sc">%&gt;%</span></span>
<span id="cb222-3"><a href="tutorial-data-voorbereiden.html#cb222-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">frequency =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb222-4"><a href="tutorial-data-voorbereiden.html#cb222-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">relative_frequency =</span> frequency <span class="sc">/</span> <span class="fu">sum</span>(frequency)) <span class="sc">%&gt;%</span></span>
<span id="cb222-5"><a href="tutorial-data-voorbereiden.html#cb222-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>frequency) <span class="sc">%&gt;%</span></span>
<span id="cb222-6"><a href="tutorial-data-voorbereiden.html#cb222-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pander</span>()</span></code></pre></div>
<table style="width:82%;">
<colgroup>
<col width="36%" />
<col width="16%" />
<col width="29%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">religion</th>
<th align="center">frequency</th>
<th align="center">relative_frequency</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Protestant</td>
<td align="center">10733</td>
<td align="center">0.4996</td>
</tr>
<tr class="even">
<td align="center">Catholic</td>
<td align="center">5066</td>
<td align="center">0.2358</td>
</tr>
<tr class="odd">
<td align="center">None</td>
<td align="center">3485</td>
<td align="center">0.1622</td>
</tr>
<tr class="even">
<td align="center">Christian</td>
<td align="center">685</td>
<td align="center">0.03189</td>
</tr>
<tr class="odd">
<td align="center">Jewish</td>
<td align="center">384</td>
<td align="center">0.01787</td>
</tr>
<tr class="even">
<td align="center">NA</td>
<td align="center">228</td>
<td align="center">0.01061</td>
</tr>
<tr class="odd">
<td align="center">Other</td>
<td align="center">220</td>
<td align="center">0.01024</td>
</tr>
<tr class="even">
<td align="center">Buddhism</td>
<td align="center">147</td>
<td align="center">0.006843</td>
</tr>
<tr class="odd">
<td align="center">Inter-nondenominational</td>
<td align="center">107</td>
<td align="center">0.004981</td>
</tr>
<tr class="even">
<td align="center">Moslem/islam</td>
<td align="center">103</td>
<td align="center">0.004794</td>
</tr>
<tr class="odd">
<td align="center">Orthodox-christian</td>
<td align="center">94</td>
<td align="center">0.004376</td>
</tr>
<tr class="even">
<td align="center">No answer</td>
<td align="center">92</td>
<td align="center">0.004282</td>
</tr>
<tr class="odd">
<td align="center">Hinduism</td>
<td align="center">70</td>
<td align="center">0.003258</td>
</tr>
<tr class="even">
<td align="center">Other eastern</td>
<td align="center">32</td>
<td align="center">0.00149</td>
</tr>
<tr class="odd">
<td align="center">Native american</td>
<td align="center">22</td>
<td align="center">0.001024</td>
</tr>
<tr class="even">
<td align="center">Don’t know</td>
<td align="center">15</td>
<td align="center">0.0006982</td>
</tr>
</tbody>
</table>
<p>Helaas is dat niet het geval wanneer we maten voor centraliteit of spreiding gaan berekenen. Per definitie, wanneer je een functie toepast op een vector die ontbrekende waarden bevat, zal de functie een ontbrekende waarde teruggeven. Beschouw de vector hieronder, waarvan we het gemiddelde en de som willen weten</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="tutorial-data-voorbereiden.html#cb223-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">12</span>, <span class="cn">NA</span>, <span class="dv">43</span>)</span>
<span id="cb223-2"><a href="tutorial-data-voorbereiden.html#cb223-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="tutorial-data-voorbereiden.html#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>Net als de waarschuwing die we kregen toen we ggplot gebruikten met ontbrekende waarden, is dit resultaat een waarschuwing. Het waarschuwt ons dat we iets willen berekenen over een vector die gedeeltelijk mist. De waarschuwing is hier echter vrij sterk; ze geeft ons niets wat we kunnen gebruiken.</p>
<p>Om dit te omzeilen heeft elk van deze functies een argument dat <code>na.rm</code> heet – wat “NA verwijderen” betekent. Als we zeggen <code>na.rm = T</code>, dan worden ontbrekende waarden verwijderd en genegeerd, en de functie berekent het resultaat met de overgebleven waarde. Dus,</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="tutorial-data-voorbereiden.html#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x, <span class="at">na.rm =</span> T)</span></code></pre></div>
<pre><code>## [1] 16.5</code></pre>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="tutorial-data-voorbereiden.html#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x, <span class="at">na.rm =</span> T)</span></code></pre></div>
<pre><code>## [1] 66</code></pre>
<p>Het feit dat we expliciet moeten aangeven dat we ontbrekende waarden willen negeren is het veiligheidsmechanisme van R dat voorkomt dat we ontbrekende waarden per ongeluk negeren.</p>
<p>Als we dus maten van centraliteit en spreiding willen berekenen voor, laten we zeggen, leeftijd, zullen we dit argument moeten gebruiken als we iets willen bereiken.<a href="#fn36" class="footnote-ref" id="fnref36"><sup>36</sup></a></p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="tutorial-data-voorbereiden.html#cb231-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb231-2"><a href="tutorial-data-voorbereiden.html#cb231-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb231-3"><a href="tutorial-data-voorbereiden.html#cb231-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">min =</span> <span class="fu">min</span>(age, <span class="at">na.rm =</span> T),</span>
<span id="cb231-4"><a href="tutorial-data-voorbereiden.html#cb231-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean =</span> <span class="fu">mean</span>(age, <span class="at">na.rm =</span> T),</span>
<span id="cb231-5"><a href="tutorial-data-voorbereiden.html#cb231-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">max =</span> <span class="fu">max</span>(age, <span class="at">na.rm =</span> T),</span>
<span id="cb231-6"><a href="tutorial-data-voorbereiden.html#cb231-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">iqr =</span> <span class="fu">IQR</span>(age, <span class="at">na.rm =</span> T)</span>
<span id="cb231-7"><a href="tutorial-data-voorbereiden.html#cb231-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 x 4
##     min  mean   max   iqr
##   &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;
## 1    18  47.2    89    26</code></pre>
<p>Tot slot, wat gebeurt er als we correlaties willen berekenen? Bijvoorbeeld, hoe zijn leeftijd en tv-uren gecorreleerd. Beide hebben ontbrekende waarden. We kunnen het volgende proberen:</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="tutorial-data-voorbereiden.html#cb233-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb233-2"><a href="tutorial-data-voorbereiden.html#cb233-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age, tv_hours) <span class="sc">%&gt;%</span></span>
<span id="cb233-3"><a href="tutorial-data-voorbereiden.html#cb233-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor</span>(<span class="at">na.rm =</span> T)</span></code></pre></div>
<pre><code>## Error in cor(., na.rm = T): unused argument (na.rm = T)</code></pre>
<p>Oeps, dat was wishful thinking van mijn kant. Het lijkt erop dat het <code>na.rm</code> argument niet bestaat voor de <code>cor</code> functie. Tot zover de consistentie in de basis R functies.</p>
<p>Om correlaties te berekenen, moeten we ervoor zorgen dat we alleen rijen zonder ontbrekende waarden beschouwen. We kunnen dit doen met de <code>na.omit</code> functie. Deze functie verwijdert – omits – alle rijen die een of meer ontbrekende waarden hebben.</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="tutorial-data-voorbereiden.html#cb235-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb235-2"><a href="tutorial-data-voorbereiden.html#cb235-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age, tv_hours) <span class="sc">%&gt;%</span></span>
<span id="cb235-3"><a href="tutorial-data-voorbereiden.html#cb235-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span></span>
<span id="cb235-4"><a href="tutorial-data-voorbereiden.html#cb235-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>()</span></code></pre></div>
<pre><code>##       age           tv_hours    
##  Min.   :18.00   Min.   :0.000  
##  1st Qu.:33.00   1st Qu.:1.000  
##  Median :45.00   Median :2.000  
##  Mean   :47.13   Mean   :2.659  
##  3rd Qu.:60.00   3rd Qu.:4.000  
##  Max.   :89.00   Max.   :8.000</code></pre>
<p>Dan kunnen we de correlatie berekenen.</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="tutorial-data-voorbereiden.html#cb237-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb237-2"><a href="tutorial-data-voorbereiden.html#cb237-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age, tv_hours) <span class="sc">%&gt;%</span></span>
<span id="cb237-3"><a href="tutorial-data-voorbereiden.html#cb237-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span></span>
<span id="cb237-4"><a href="tutorial-data-voorbereiden.html#cb237-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor</span>()</span></code></pre></div>
<pre><code>##                age  tv_hours
## age      1.0000000 0.1895392
## tv_hours 0.1895392 1.0000000</code></pre>
<p>De <code>na.omit</code> functie kan wat gevaarlijk zijn en zou alleen gebruikt moeten worden in uitzonderlijke gevallen als deze. Het kan een enorm verschil maken als we het vóór select doen. Beschouw opnieuw de <code>survey2</code> dataset, waar alle variabelen een aantal ontbrekende waarden hebben.</p>
<p>Deze dataset heeft het volgende aantal rijen.</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="tutorial-data-voorbereiden.html#cb239-1" aria-hidden="true" tabindex="-1"></a>survey2 <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span></code></pre></div>
<pre><code>## [1] 21483</code></pre>
<p>Als we leeftijd en tv-uren selecteren, en rijen met ontbrekende waarden verwijderen, houden we het volgende aantal rijen over</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="tutorial-data-voorbereiden.html#cb241-1" aria-hidden="true" tabindex="-1"></a>survey2 <span class="sc">%&gt;%</span></span>
<span id="cb241-2"><a href="tutorial-data-voorbereiden.html#cb241-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age, tv_hours) <span class="sc">%&gt;%</span></span>
<span id="cb241-3"><a href="tutorial-data-voorbereiden.html#cb241-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span></span>
<span id="cb241-4"><a href="tutorial-data-voorbereiden.html#cb241-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code></pre></div>
<pre><code>## [1] 10732</code></pre>
<p>Maar als we eerst de rijen met ontbrekende waarden verwijderen, en dan de twee variabelen selecteren, houden we slechts het volgende aantal rijen over.</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="tutorial-data-voorbereiden.html#cb243-1" aria-hidden="true" tabindex="-1"></a>survey2 <span class="sc">%&gt;%</span></span>
<span id="cb243-2"><a href="tutorial-data-voorbereiden.html#cb243-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span></span>
<span id="cb243-3"><a href="tutorial-data-voorbereiden.html#cb243-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age, tv_hours) <span class="sc">%&gt;%</span></span>
<span id="cb243-4"><a href="tutorial-data-voorbereiden.html#cb243-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code></pre></div>
<pre><code>## [1] 9974</code></pre>
<p>Zie je wat er anders is? Kijk maar eens goed. Als we de verwijdering uitvoeren voor de select, zal het rekening houden met ontbrekende waarden voor ALLE variabelen. Als we de selectie eerst doen, wordt alleen gecontroleerd op de variabelen die we behouden. Deze nuance kan in de praktijk een groot verschil maken. Het gebruik van de <code>na.omit</code> functie moet altijd een waarschuwing in je achterhoofd oproepen dat je voorzichtig moet zijn.</p>
<p>Het is raadzaam steeds voorzichtig te zijn bij het werken met ontbrekende waarden. En met deze wijze woorden beëindigen we onze data cleaning inspanningen, en gaan we over tot transformaties.</p>
</div>
</div>
</div>
<div id="data-transformatie" class="section level2" number="8.5">
<h2><span class="header-section-number">8.5</span> Data transformatie</h2>
<p>Terwijl het opschonen van gegevens gericht is op het vinden van fouten, gaat het bij het omvormen van gegevens om het analyseren ervan te vergemakkelijken, of resultaten te verbeteren. Er zijn vele manieren om dat te doen.</p>
<p>Ten eerste kunnen we het aantal niveaus in een categorische variabele verminderen, zodat er niet te veel verschillende categorieën worden getoond. Ten tweede kunnen we ook nieuwe variabelen creëren op basis van bestaande variabelen. Dit laatste wordt ook wel het verrijken van gegevens genoemd. Bovendien kunnen we variabelen aanpassen om ze gemakkelijker te interpreteren te maken. Bijvoorbeeld door afstanden in km te gebruiken in plaats van in mijlen (of andersom als je Brits of Amerikaans bent). Verder kunnen we continue variabelen discreet maken - door ze in categorische variabelen te veranderen - zodat we andere analyses of visualisaties kunnen gebruiken. Tenslotte zullen we ook enkele transformaties bespreken die nuttig zijn bij het visualiseren van gegevens, in het bijzonder om variabelen te ordenen.</p>
<p>Veel dingen te doen, dus tijd om te beginnen!</p>
<div id="discretisern-van-continue-variablen" class="section level3" number="8.5.1">
<h3><span class="header-section-number">8.5.1</span> Discretisern van continue variablen</h3>
<p>Het omzetten van een continue variabele in een categorische variabele wordt discretisatie genoemd. Verschillende functies om dit te doen worden aangeboden door ggplot.</p>
<ul>
<li><code>cut_width</code>: intervallen van een bepaalde breedte maken</li>
<li><code>cut_interval</code>: het creëren van een specifiek aantal intervallen van gelijke breedte</li>
<li><code>cut_number</code>: het creëren van een specifiek aantal intervallen met een gelijk aantal waarnemingen.</li>
</ul>
<p>Bijvoorbeeld, we kunnen tv_hours discretiseren in intervallen van breedte 4.<a href="#fn37" class="footnote-ref" id="fnref37"><sup>37</sup></a></p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="tutorial-data-voorbereiden.html#cb245-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb245-2"><a href="tutorial-data-voorbereiden.html#cb245-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tv_hours =</span> <span class="fu">cut_width</span>(tv_hours, <span class="at">width =</span> <span class="dv">4</span>, <span class="at">boundary =</span> <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb245-3"><a href="tutorial-data-voorbereiden.html#cb245-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(tv_hours)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   tv_hours     n
##   &lt;fct&gt;    &lt;int&gt;
## 1 [0,4]     9421
## 2 (4,8]     1553
## 3 &lt;NA&gt;     10509</code></pre>
<p>Als alternatief kunnen we tv_-uren_hours in 4 gelijke intervallen verdelen.</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="tutorial-data-voorbereiden.html#cb247-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb247-2"><a href="tutorial-data-voorbereiden.html#cb247-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tv_hours =</span> <span class="fu">cut_interval</span>(tv_hours, <span class="at">n =</span> <span class="dv">4</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb247-3"><a href="tutorial-data-voorbereiden.html#cb247-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(tv_hours)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   tv_hours     n
##   &lt;fct&gt;    &lt;int&gt;
## 1 [0,2]     6059
## 2 (2,4]     3362
## 3 (4,6]     1172
## 4 (6,8]      381
## 5 &lt;NA&gt;     10509</code></pre>
<p>Of we kunnen tv_hours in drie intervallen verdelen die een gelijk aantal waarnemingen bevatten.</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="tutorial-data-voorbereiden.html#cb249-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb249-2"><a href="tutorial-data-voorbereiden.html#cb249-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tv_hours =</span> <span class="fu">cut_number</span>(tv_hours, <span class="at">n =</span> <span class="dv">3</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb249-3"><a href="tutorial-data-voorbereiden.html#cb249-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(tv_hours)</span></code></pre></div>
<pre><code>## # A tibble: 4 x 2
##   tv_hours     n
##   &lt;fct&gt;    &lt;int&gt;
## 1 [0,2]     6059
## 2 (2,3]     1956
## 3 (3,8]     2959
## 4 &lt;NA&gt;     10509</code></pre>
<p>Hierbij moet worden opgemerkt dat de intervallen niet helemaal evenveel waarnemingen bevatten. Dat komt omdat er veel waarnemingen zijn met een unieke waarde, die niet verder kunnen worden gesplitst. Maar toch zal cut_number zijn best doen, wat beter zal uitpakken als de waarden van de variabele unieker zijn. Bijvoorbeeld, leeftijd leent zich hier beter voor:</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="tutorial-data-voorbereiden.html#cb251-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb251-2"><a href="tutorial-data-voorbereiden.html#cb251-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age =</span> <span class="fu">cut_number</span>(age, <span class="at">n =</span> <span class="dv">5</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb251-3"><a href="tutorial-data-voorbereiden.html#cb251-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(age)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 2
##   age         n
##   &lt;fct&gt;   &lt;int&gt;
## 1 [18,31]  4656
## 2 (31,41]  4305
## 3 (41,51]  4207
## 4 (51,63]  4149
## 5 (63,89]  4090
## 6 &lt;NA&gt;       76</code></pre>
<p>Elk van de discretisatie-functies staat ons toe om de namen van de categorieën aan te passen – in plaats van de standaard interval notatie door een vector van namen mee te geven aan het <code>labels</code> argument. Bijvoorbeeld:</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="tutorial-data-voorbereiden.html#cb253-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb253-2"><a href="tutorial-data-voorbereiden.html#cb253-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_category =</span> <span class="fu">cut_number</span>(age, <span class="at">n =</span> <span class="dv">3</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Young&quot;</span>, <span class="st">&quot;Middle-aged&quot;</span>, <span class="st">&quot;Old&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb253-3"><a href="tutorial-data-voorbereiden.html#cb253-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(age_category) <span class="sc">%&gt;%</span></span>
<span id="cb253-4"><a href="tutorial-data-voorbereiden.html#cb253-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">min =</span> <span class="fu">min</span>(age), <span class="at">max =</span> <span class="fu">max</span>(age), <span class="at">frequency =</span> <span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 4 x 4
##   age_category   min   max frequency
##   &lt;fct&gt;        &lt;int&gt; &lt;int&gt;     &lt;int&gt;
## 1 Young           18    37      7234
## 2 Middle-aged     38    54      7117
## 3 Old             55    89      7056
## 4 &lt;NA&gt;            NA    NA        76</code></pre>
<p>In het laatste voorbeeld hebben wij de gediscretiseerde variabele onder een andere naam opgeslagen. Dit is zeer aan te raden, om de oorspronkelijke, meer gedetailleerde gegevens niet te verliezen.</p>
</div>
<div id="herschalen-van-continue-variablen" class="section level3" number="8.5.2">
<h3><span class="header-section-number">8.5.2</span> Herschalen van continue variablen</h3>
<p>Wanneer we continue variabelen hebben, kunnen we ook de schaal aanpassen. We kunnen bijvoorbeeld het percentage tv_hours per dag berekenen door het aantal tv_hours te delen door 24.</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="tutorial-data-voorbereiden.html#cb255-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb255-2"><a href="tutorial-data-voorbereiden.html#cb255-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tv_per_day =</span> tv_hours <span class="sc">/</span> <span class="dv">24</span>) <span class="sc">%&gt;%</span></span>
<span id="cb255-3"><a href="tutorial-data-voorbereiden.html#cb255-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>()</span></code></pre></div>
<pre><code>##       year               marital           age           race      
##  Min.   :2000   Divorced     : 3383   Min.   :18.00   Black: 3129  
##  1st Qu.:2002   Married      :10117   1st Qu.:33.00   Other: 1959  
##  Median :2006   Never married: 5416   Median :46.00   White:16395  
##  Mean   :2007   No answer    :   17   Mean   :47.18                
##  3rd Qu.:2010   Separated    :  743   3rd Qu.:59.00                
##  Max.   :2014   Widowed      : 1807   Max.   :89.00                
##                                       NA&#39;s   :76                   
##        reported_income                   party            religion    
##  $25000 or more:7363   Independent          :4119   Protestant:10846  
##  Not applicable:7043   Democrat, weak       :3690   Catholic  : 5124  
##  $20000 - 24999:1283   Democrat, strong     :3490   None      : 3523  
##  $10000 - 14999:1168   Republican, weak     :3032   Christian :  689  
##  $15000 - 19999:1048   Independent, near dem:2499   Jewish    :  388  
##  Refused       : 975   Republican, strong   :2314   Other     :  224  
##  (Other)       :2603   (Other)              :2339   (Other)   :  689  
##            denomination      tv_hours       tv_per_day   
##  Not applicable  :10072   Min.   :0.000   Min.   :0.000  
##  Other           : 2534   1st Qu.:1.000   1st Qu.:0.042  
##  No denomination : 1683   Median :2.000   Median :0.083  
##  Southern baptist: 1536   Mean   :2.659   Mean   :0.111  
##  Baptist-dk which: 1457   3rd Qu.:4.000   3rd Qu.:0.167  
##  United methodist: 1067   Max.   :8.000   Max.   :0.333  
##  (Other)         : 3134   NA&#39;s   :10509   NA&#39;s   :10509</code></pre>
<p>Andere veel voorkomende transformaties zijn:</p>
<ul>
<li>verschillende munteenheden (euro vs dollar, enz.)</li>
<li>verschillende meetschalen (mijl vs km, inch vs cm, enz.)</li>
<li>verschillende tijdzones of tijdseenheden (waarover later meer).</li>
</ul>
</div>
<div id="toevoegen-van-calculated-variables" class="section level3" number="8.5.3">
<h3><span class="header-section-number">8.5.3</span> Toevoegen van calculated variables</h3>
<p>De toevoeging van berekende variabelen is vergelijkbaar met het herschalen van variabelen. Het enige verschil is dat herschalen slechts betrekking heeft op één variabele, terwijl berekende variabelen betrekking kunnen hebben op verschillende variabelen.</p>
<p>Wij kunnen bijvoorbeeld het geboortejaar berekenen voor de personen in onze gegevens.</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="tutorial-data-voorbereiden.html#cb257-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb257-2"><a href="tutorial-data-voorbereiden.html#cb257-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_of_birth =</span> year <span class="sc">-</span> age) <span class="sc">%&gt;%</span></span>
<span id="cb257-3"><a href="tutorial-data-voorbereiden.html#cb257-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, age, year_of_birth) <span class="sc">%&gt;%</span></span>
<span id="cb257-4"><a href="tutorial-data-voorbereiden.html#cb257-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>()</span></code></pre></div>
<pre><code>##       year           age        year_of_birth 
##  Min.   :2000   Min.   :18.00   Min.   :1911  
##  1st Qu.:2002   1st Qu.:33.00   1st Qu.:1947  
##  Median :2006   Median :46.00   Median :1960  
##  Mean   :2007   Mean   :47.18   Mean   :1959  
##  3rd Qu.:2010   3rd Qu.:59.00   3rd Qu.:1973  
##  Max.   :2014   Max.   :89.00   Max.   :1996  
##                 NA&#39;s   :76      NA&#39;s   :76</code></pre>
</div>
<div id="factoren-transformeren" class="section level3" number="8.5.4">
<h3><span class="header-section-number">8.5.4</span> Factoren transformeren</h3>
<p>Bij de transformatie van categorische variabelen is het vaak de bedoeling het aantal waarden te verminderen. Dit kan op verschillende manieren gebeuren:</p>
<ul>
<li>het combineren van waarden die op elkaar lijken tot één enkele waarde</li>
<li>het combineren van niet vaak voorkomende waarden in een “Diverse” of “Andere” waarde.</li>
</ul>
<p>De eerste manier kan worden gedaan met <code>fct_collapse</code>, die factor niveaus samenvouwt (collapsed) tot een nieuw niveau. De tweede manier kan worden bereikt met <code>fct_lump</code>, die niet vaak voorkomende waarden samenvoegt in één aparte groep (lump)</p>
<p>Het samenvouwen van een factor kan als volgt worden gedaan. Voor elke groep van niveaus die je wilt samenvouwen, maak je een vector. Vervolgens kan je elke groep een nieuwe naam geven.<a href="#fn38" class="footnote-ref" id="fnref38"><sup>38</sup></a> Alle niveaus die je niet noemt, blijven onaangeroerd.</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="tutorial-data-voorbereiden.html#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fct_collapse</span>(factor,</span>
<span id="cb259-2"><a href="tutorial-data-voorbereiden.html#cb259-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">new_group_1 =</span> <span class="fu">c</span>(<span class="st">&quot;old_level_1&quot;</span>, <span class="st">&quot;old_level_2&quot;</span>, <span class="st">&quot;...&quot;</span>),</span>
<span id="cb259-3"><a href="tutorial-data-voorbereiden.html#cb259-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">new_group_2 =</span> <span class="fu">c</span>(<span class="st">&quot;old_level_a&quot;</span>, <span class="st">&quot;old_level_b&quot;</span>, <span class="st">&quot;...&quot;</span>),</span>
<span id="cb259-4"><a href="tutorial-data-voorbereiden.html#cb259-4" aria-hidden="true" tabindex="-1"></a>  ...</span>
<span id="cb259-5"><a href="tutorial-data-voorbereiden.html#cb259-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>In onze survey-data kunnen we de partijvariabele in verschillende groepen indelen: “Democrat’, ‘Republican,’ ‘Independent’ en ‘Other.’ We slaan de nieuwe variabele op als party_group:</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="tutorial-data-voorbereiden.html#cb260-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb260-2"><a href="tutorial-data-voorbereiden.html#cb260-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">party_group =</span> <span class="fu">fct_collapse</span>(party,</span>
<span id="cb260-3"><a href="tutorial-data-voorbereiden.html#cb260-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">Other =</span> <span class="fu">c</span>(</span>
<span id="cb260-4"><a href="tutorial-data-voorbereiden.html#cb260-4" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;No answer&quot;</span>,</span>
<span id="cb260-5"><a href="tutorial-data-voorbereiden.html#cb260-5" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;Don&#39;t know&quot;</span>,</span>
<span id="cb260-6"><a href="tutorial-data-voorbereiden.html#cb260-6" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;Other party&quot;</span></span>
<span id="cb260-7"><a href="tutorial-data-voorbereiden.html#cb260-7" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb260-8"><a href="tutorial-data-voorbereiden.html#cb260-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">Republican =</span> <span class="fu">c</span>(</span>
<span id="cb260-9"><a href="tutorial-data-voorbereiden.html#cb260-9" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;Republican, strong&quot;</span>,</span>
<span id="cb260-10"><a href="tutorial-data-voorbereiden.html#cb260-10" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;Republican, weak&quot;</span></span>
<span id="cb260-11"><a href="tutorial-data-voorbereiden.html#cb260-11" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb260-12"><a href="tutorial-data-voorbereiden.html#cb260-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">Independent =</span> <span class="fu">c</span>(</span>
<span id="cb260-13"><a href="tutorial-data-voorbereiden.html#cb260-13" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;Independent, near rep&quot;</span>,</span>
<span id="cb260-14"><a href="tutorial-data-voorbereiden.html#cb260-14" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;Independent&quot;</span>,</span>
<span id="cb260-15"><a href="tutorial-data-voorbereiden.html#cb260-15" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;Independent, near dem&quot;</span></span>
<span id="cb260-16"><a href="tutorial-data-voorbereiden.html#cb260-16" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb260-17"><a href="tutorial-data-voorbereiden.html#cb260-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">Democrat =</span> <span class="fu">c</span>(</span>
<span id="cb260-18"><a href="tutorial-data-voorbereiden.html#cb260-18" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;Democrat, weak&quot;</span>,</span>
<span id="cb260-19"><a href="tutorial-data-voorbereiden.html#cb260-19" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;Democrat, strong&quot;</span></span>
<span id="cb260-20"><a href="tutorial-data-voorbereiden.html#cb260-20" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb260-21"><a href="tutorial-data-voorbereiden.html#cb260-21" aria-hidden="true" tabindex="-1"></a>  )) <span class="ot">-&gt;</span> survey</span></code></pre></div>
<p>Transformaties als deze kunnen op zichzelf al nuttig zijn: het aantal categorieën verminderen, zoals in deze plot.</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="tutorial-data-voorbereiden.html#cb261-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb261-2"><a href="tutorial-data-voorbereiden.html#cb261-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(party_group)) <span class="sc">+</span></span>
<span id="cb261-3"><a href="tutorial-data-voorbereiden.html#cb261-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb261-4"><a href="tutorial-data-voorbereiden.html#cb261-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-215-1.png" width="100%" /></p>
<p>Maar ze kunnen net zo goed gebruikt worden in combinatie met de originele levels. Bijvoorbeeld om de visuals te verbeteren:<a href="#fn39" class="footnote-ref" id="fnref39"><sup>39</sup></a></p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="tutorial-data-voorbereiden.html#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb262-2"><a href="tutorial-data-voorbereiden.html#cb262-2" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb262-3"><a href="tutorial-data-voorbereiden.html#cb262-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(party, <span class="at">fill =</span> party_group)) <span class="sc">+</span></span>
<span id="cb262-4"><a href="tutorial-data-voorbereiden.html#cb262-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb262-5"><a href="tutorial-data-voorbereiden.html#cb262-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="fu">fct_rev</span>(party_group) <span class="sc">~</span> .,</span>
<span id="cb262-6"><a href="tutorial-data-voorbereiden.html#cb262-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>, <span class="at">space =</span> <span class="st">&quot;free&quot;</span></span>
<span id="cb262-7"><a href="tutorial-data-voorbereiden.html#cb262-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb262-8"><a href="tutorial-data-voorbereiden.html#cb262-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb262-9"><a href="tutorial-data-voorbereiden.html#cb262-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_tableau</span>()</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-216-1.png" width="100%" /></p>
<p>Als alternatief kunnen we fct_lump gebruiken om een “Andere” categorie te maken. Kijk bijvoorbeeld eens naar de religies.</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="tutorial-data-voorbereiden.html#cb263-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb263-2"><a href="tutorial-data-voorbereiden.html#cb263-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(religion)</span></code></pre></div>
<pre><code>## # A tibble: 15 x 2
##    religion                    n
##    &lt;fct&gt;                   &lt;int&gt;
##  1 Buddhism                  147
##  2 Catholic                 5124
##  3 Christian                 689
##  4 Don&#39;t know                 15
##  5 Hinduism                   71
##  6 Inter-nondenominational   109
##  7 Jewish                    388
##  8 Moslem/islam              104
##  9 Native american            23
## 10 No answer                  93
## 11 None                     3523
## 12 Orthodox-christian         95
## 13 Other                     224
## 14 Other eastern              32
## 15 Protestant              10846</code></pre>
<p>Laten we zeggen dat we alleen de 5 meest voorkomende godsdiensten willen behouden. Dat kunnen we als volgt doen.</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="tutorial-data-voorbereiden.html#cb265-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb265-2"><a href="tutorial-data-voorbereiden.html#cb265-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">religion =</span> <span class="fu">fct_lump</span>(religion, <span class="at">n =</span> <span class="dv">5</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb265-3"><a href="tutorial-data-voorbereiden.html#cb265-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(religion)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 2
##   religion       n
##   &lt;fct&gt;      &lt;int&gt;
## 1 Catholic    5124
## 2 Christian    689
## 3 Jewish       388
## 4 None        3523
## 5 Protestant 10846
## 6 Other        913</code></pre>
<p>Het label “Other” kan naar believen worden gewijzigd.</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="tutorial-data-voorbereiden.html#cb267-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb267-2"><a href="tutorial-data-voorbereiden.html#cb267-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">religion =</span> <span class="fu">fct_lump</span>(religion, <span class="at">n =</span> <span class="dv">5</span>, <span class="at">other_level =</span> <span class="st">&quot;Other religions&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb267-3"><a href="tutorial-data-voorbereiden.html#cb267-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(religion)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 2
##   religion            n
##   &lt;fct&gt;           &lt;int&gt;
## 1 Catholic         5124
## 2 Christian         689
## 3 Jewish            388
## 4 None             3523
## 5 Protestant      10846
## 6 Other religions   913</code></pre>
<p>In plaats van het aantal te behouden niveaus op te geven, kan je ook een minimale relatieve frequentie opgeven met het <code>prop</code> argument.</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="tutorial-data-voorbereiden.html#cb269-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb269-2"><a href="tutorial-data-voorbereiden.html#cb269-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">religion =</span> <span class="fu">fct_lump</span>(religion, <span class="at">prop =</span> <span class="fl">0.02</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb269-3"><a href="tutorial-data-voorbereiden.html#cb269-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(religion)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   religion       n
##   &lt;fct&gt;      &lt;int&gt;
## 1 Catholic    5124
## 2 Christian    689
## 3 None        3523
## 4 Protestant 10846
## 5 Other       1301</code></pre>
<p>Meer nog dan het cleanen van data, zijn alle transformaties die we gezien hebben zeer iteratief van aard, en kunnen ze soms alleen gebruikt worden voor specifieke analyses. We willen bijvoorbeeld misschien de weinig voorkomende godsdiensten op één hoop gooien om een staafdiagram te maken zonder al te veel balken – maar we willen waarschijnlijk niet de weinig voorkomende godsdiensten helemaal verwijderen. Transformaties zullen dus vaak gebeuren in de opbouw naar een grafiek of tabel, en niet permanent in de gegevens worden opgeslagen. Dit geldt vooral voor de laatste functies die we hier zullen bespreken: herordeningsfuncties.</p>
</div>
</div>
<div id="data-transformaties-tijdens-data-visualizatie" class="section level2" number="8.6">
<h2><span class="header-section-number">8.6</span> Data transformaties tijdens data visualizatie</h2>
<p>Bij het visualiseren van categorische variabelen, willen we vaak de volgorde van de niveaus veranderen op basis van frequentie of op basis van een andere variabele. We zagen al <code>fct_relevel</code> om handmatig niveaus te herschikken, maar het is niet erg geschikt om automatisch niveaus te herschikken. Hiervoor zullen we twee nieuwe functies gebruiken: fct_infreq en fct_reorder.</p>
<p>We beginnen met de volgende grafiek.</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="tutorial-data-voorbereiden.html#cb271-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb271-2"><a href="tutorial-data-voorbereiden.html#cb271-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(religion)) <span class="sc">+</span></span>
<span id="cb271-3"><a href="tutorial-data-voorbereiden.html#cb271-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb271-4"><a href="tutorial-data-voorbereiden.html#cb271-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-221-1.png" width="100%" /></p>
<p>Een factor kan worden geordend op basis van de (in)frequentie van elk niveau met behulp van de functie fct_infreq. Het gebruik ervan is eenvoudig. We kunnen kiezen om de functie rechtstreeks in ggplot toe te voegen, of om de religie variabele bij te werken met mutate alvorens te plotten.</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="tutorial-data-voorbereiden.html#cb272-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb272-2"><a href="tutorial-data-voorbereiden.html#cb272-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="fu">fct_infreq</span>(religion))) <span class="sc">+</span></span>
<span id="cb272-3"><a href="tutorial-data-voorbereiden.html#cb272-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb272-4"><a href="tutorial-data-voorbereiden.html#cb272-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-222-1.png" width="100%" /></p>
<p><code>fct_infreq</code> zal voor elk van de labels - religies in dit geval - tellen hoe vaak het voorkomt, en de niveaus overeenkomstig te herschikken. Stel nu dat we geen absolute frequenties willen zoals in de laatste plot, maar relatieve. In dat geval moeten we ze zelf berekenen en <code>geom_col</code> gebruiken.</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="tutorial-data-voorbereiden.html#cb273-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb273-2"><a href="tutorial-data-voorbereiden.html#cb273-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(religion) <span class="sc">%&gt;%</span></span>
<span id="cb273-3"><a href="tutorial-data-voorbereiden.html#cb273-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">freq =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb273-4"><a href="tutorial-data-voorbereiden.html#cb273-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rel_freq =</span> freq <span class="sc">/</span> <span class="fu">sum</span>(freq)) <span class="sc">%&gt;%</span></span>
<span id="cb273-5"><a href="tutorial-data-voorbereiden.html#cb273-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> religion, <span class="at">y =</span> rel_freq)) <span class="sc">+</span></span>
<span id="cb273-6"><a href="tutorial-data-voorbereiden.html#cb273-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb273-7"><a href="tutorial-data-voorbereiden.html#cb273-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-223-1.png" width="100%" /></p>
<p>We kunnen nu de relatieve frequenties uit de grafiek aflezen. Laten we nu de staven nog eens ordenen.</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="tutorial-data-voorbereiden.html#cb274-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb274-2"><a href="tutorial-data-voorbereiden.html#cb274-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(religion) <span class="sc">%&gt;%</span></span>
<span id="cb274-3"><a href="tutorial-data-voorbereiden.html#cb274-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">freq =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb274-4"><a href="tutorial-data-voorbereiden.html#cb274-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rel_freq =</span> freq <span class="sc">/</span> <span class="fu">sum</span>(freq)) <span class="sc">%&gt;%</span></span>
<span id="cb274-5"><a href="tutorial-data-voorbereiden.html#cb274-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_infreq</span>(religion), <span class="at">y =</span> rel_freq)) <span class="sc">+</span></span>
<span id="cb274-6"><a href="tutorial-data-voorbereiden.html#cb274-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb274-7"><a href="tutorial-data-voorbereiden.html#cb274-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-224-1.png" width="100%" /></p>
<p>Oeps, dat leek niet te werken. Waarom niet? Laten we eens kijken naar de gegevens die we aan ggplot gaven.</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="tutorial-data-voorbereiden.html#cb275-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb275-2"><a href="tutorial-data-voorbereiden.html#cb275-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(religion) <span class="sc">%&gt;%</span></span>
<span id="cb275-3"><a href="tutorial-data-voorbereiden.html#cb275-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">freq =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb275-4"><a href="tutorial-data-voorbereiden.html#cb275-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rel_freq =</span> freq <span class="sc">/</span> <span class="fu">sum</span>(freq))</span></code></pre></div>
<pre><code>## # A tibble: 15 x 3
##    religion                 freq rel_freq
##    &lt;fct&gt;                   &lt;int&gt;    &lt;dbl&gt;
##  1 Buddhism                  147 0.00684 
##  2 Catholic                 5124 0.239   
##  3 Christian                 689 0.0321  
##  4 Don&#39;t know                 15 0.000698
##  5 Hinduism                   71 0.00330 
##  6 Inter-nondenominational   109 0.00507 
##  7 Jewish                    388 0.0181  
##  8 Moslem/islam              104 0.00484 
##  9 Native american            23 0.00107 
## 10 No answer                  93 0.00433 
## 11 None                     3523 0.164   
## 12 Orthodox-christian         95 0.00442 
## 13 Other                     224 0.0104  
## 14 Other eastern              32 0.00149 
## 15 Protestant              10846 0.505</code></pre>
<p>De gegevens – een frequentietabel – bevat een rij voor elke religie. Als we <code>fct_infreq</code> gebruiken op deze tabel, dan komen alle religies één keer voor, dus ze komen allemaal even vaak voor. <code>fct_infreq</code> probeert impliciet frequenties te berekenen, maar dat hebben we al gedaan. Het resultaat is dat de ordening mislukt. Het is vergelijkbaar met het gebruik van <code>geom_bar</code> op basis van een frequentietabel – we proberen de frequenties twee keer te berekenen, wat resulteert in onbedoelde plots.</p>
<p>Dus, wat kunnen we in plaats daarvan doen? Wel, we willen de religies ordenen op basis van frequentie. Dat zou niet moeilijk mogen zijn, want de frequentie is er al. De functie <code>fct_reorder</code> kan ons daarbij helpen. In tegenstelling tot <code>fct_infreq</code> zal deze een tweede variabele gebruiken die we opgeven om de factor te ordenen. Dus:</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="tutorial-data-voorbereiden.html#cb277-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb277-2"><a href="tutorial-data-voorbereiden.html#cb277-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(religion) <span class="sc">%&gt;%</span></span>
<span id="cb277-3"><a href="tutorial-data-voorbereiden.html#cb277-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">freq =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb277-4"><a href="tutorial-data-voorbereiden.html#cb277-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rel_freq =</span> freq <span class="sc">/</span> <span class="fu">sum</span>(freq)) <span class="sc">%&gt;%</span></span>
<span id="cb277-5"><a href="tutorial-data-voorbereiden.html#cb277-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(religion, rel_freq), <span class="at">y =</span> rel_freq)) <span class="sc">+</span></span>
<span id="cb277-6"><a href="tutorial-data-voorbereiden.html#cb277-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb277-7"><a href="tutorial-data-voorbereiden.html#cb277-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-226-1.png" width="100%" /></p>
<p>Merk op dat we tweemaal verwijzen naar rel_freq: eenmaal om te ordenen, en eenmaal om te gebruiken als y-as. Merk ook op dat de volgorde van de staven is omgekeerd: <code>fct_infreq</code> zal altijd ordenen van meest naar minst frequent, terwijl onze huidige configuratie met <code>fct_reorder</code> ordent van minst naar meest frequent. We kunnen dit eenvoudig veranderen met desc(), zoals we eerder hebben gedaan.</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="tutorial-data-voorbereiden.html#cb278-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb278-2"><a href="tutorial-data-voorbereiden.html#cb278-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(religion) <span class="sc">%&gt;%</span></span>
<span id="cb278-3"><a href="tutorial-data-voorbereiden.html#cb278-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">freq =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb278-4"><a href="tutorial-data-voorbereiden.html#cb278-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rel_freq =</span> freq <span class="sc">/</span> <span class="fu">sum</span>(freq)) <span class="sc">%&gt;%</span></span>
<span id="cb278-5"><a href="tutorial-data-voorbereiden.html#cb278-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(religion, <span class="fu">desc</span>(rel_freq)), <span class="at">y =</span> rel_freq)) <span class="sc">+</span></span>
<span id="cb278-6"><a href="tutorial-data-voorbereiden.html#cb278-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb278-7"><a href="tutorial-data-voorbereiden.html#cb278-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-227-1.png" width="100%" /></p>
<p>Als alternatief kunnen we de <code>fct_rev</code> functie gebruiken: deze functie zal de volgorde van een factor omkeren. Zo kunnen we bijvoorbeeld de volgorde van <code>fct_infreq</code> omkeren.</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb279-1"><a href="tutorial-data-voorbereiden.html#cb279-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb279-2"><a href="tutorial-data-voorbereiden.html#cb279-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="fu">fct_rev</span>(<span class="fu">fct_infreq</span>(religion)))) <span class="sc">+</span></span>
<span id="cb279-3"><a href="tutorial-data-voorbereiden.html#cb279-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb279-4"><a href="tutorial-data-voorbereiden.html#cb279-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-228-1.png" width="100%" /></p>
<p>Dus, samenvattend:</p>
<ul>
<li><code>fct_infreq(f)</code>: herorden de niveaus van factor f van meest naar minst frequent</li>
<li><code>fct_reorder(f, x)</code>: herschik de niveaus van factor f volgens variabele x</li>
<li><code>fct_rev(f)</code>: draai de volgorde van de niveaus van factor f om</li>
</ul>
<p>In het algemeen moet je <code>fct_infreq</code> alleen gebruiken op de originele gegevens, en als je een frequentietabel als invoer hebt voor ggplot, moet je <code>fct_reorder</code> gebruiken.</p>
<p>Er is echter nog één ding dat we moeten behandelen. <code>fct_reorder(f,x)</code> kan herordenen op elke variabele x, niet alleen op frequentie. Kijk bijvoorbeeld eens naar de volgende plot.</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="tutorial-data-voorbereiden.html#cb280-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb280-2"><a href="tutorial-data-voorbereiden.html#cb280-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(marital, age)) <span class="sc">+</span></span>
<span id="cb280-3"><a href="tutorial-data-voorbereiden.html#cb280-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-229-1.png" width="100%" /></p>
<p>Deze plot toont de verdeling van de leeftijd voor verschillende burgerlijke standen. Laten we zeggen dat we deze boxplots willen sorteren op leeftijd. We gebruiken <code>fct_reorder</code> net zoals we eerder deden.</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="tutorial-data-voorbereiden.html#cb281-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb281-2"><a href="tutorial-data-voorbereiden.html#cb281-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="fu">fct_reorder</span>(marital, age), age)) <span class="sc">+</span></span>
<span id="cb281-3"><a href="tutorial-data-voorbereiden.html#cb281-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-230-1.png" width="100%" /></p>
<p>Ook hier zijn de resultaten niet zoals we zouden verwachten. Wat is er anders dan bij het vorige gebruik met frequenties?</p>
<p>There are actually two differences.</p>
<ol style="list-style-type: decimal">
<li>Vroeger hadden we één enkele frequentie voor elke godsdienst, waardoor het gemakkelijk was ze te sorteren.</li>
</ol>
<p>Nu hebben we voor elke burgerlijke staat veel personen met verschillende leeftijden. We moeten ze samenvatten in een enkele waarde, zoals het gemiddelde of de mediaan. Dit kan gedaan worden door het .fun argument toe te voegen aan factor reorder.</p>
<p>fct_reorder(marital, age, .fun = median)</p>
<ol start="2" style="list-style-type: decimal">
<li>Sommige personen hebben geen leeftijd, maar een ontbrekende waarde.</li>
</ol>
<p>Het berekenen van een functie met ontbrekende waarden leidt tot een ontbrekende waarde. We moeten ervoor zorgen dat ontbrekende waarden worden genegeerd. Elk argument dat we toevoegen aan fct_reorder na het .fun argument zal worden beschouwd als een argument voor deze functie. Dus, het volgende zal de marital waarden correct sorteren</p>
<p>fct_reorder(marital, age, .fun = median, na.rm = T)</p>
<p>Laat ons het proberen:</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="tutorial-data-voorbereiden.html#cb282-1" aria-hidden="true" tabindex="-1"></a>survey <span class="sc">%&gt;%</span></span>
<span id="cb282-2"><a href="tutorial-data-voorbereiden.html#cb282-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="fu">fct_reorder</span>(marital, age, <span class="at">.fun =</span> median, <span class="at">na.rm =</span> T), age)) <span class="sc">+</span></span>
<span id="cb282-3"><a href="tutorial-data-voorbereiden.html#cb282-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-231-1.png" width="100%" /></p>
<p>Dit ziet er beter uit. Dus, laten we het nog eens samenvatten.</p>
<ul>
<li><code>fct_infreq(f)</code>: herorden de niveaus van factor f van meest naar minst frequent</li>
<li><code>fct_reorder</code>: herschik de niveaus van factor f volgens variabele x
<ul>
<li><code>fct_reorder(f,x)</code> als we zeker weten dat er een enkele x-waarde is voor elk f-niveau</li>
<li><code>fct_reorder(f,x, .fun = summarize_function)</code> als er meer dan één x-waarde kan zijn voor een bepaald f-niveau. De <code>summarize_function</code> zal worden gebruikt om meerdere waarden te combineren. Dit kan zijn gemiddelde, mediaan, som, lengte, … elke functie die een enkele waarde teruggeeft.</li>
<li>Als we extra argumenten aan de summarize functie moeten meegeven, zoals na.rm = T, kunnen we dit als volgt doen: <code>fct_reorder(f,x, .fun = summarize_function, na.rm = T)</code>.</li>
</ul></li>
<li><code>fct_rev(f)</code>: draai de volgorde van de niveaus van factor f om</li>
</ul>
</div>
<div id="achtergrondmateriaal" class="section level2" number="8.7">
<h2><span class="header-section-number">8.7</span> Achtergrondmateriaal</h2>
<ul>
<li>Meer informatie over forcats kan gelezen worden in Hoofdstuk 15 van <a href="https://r4ds.had.co.nz/factors.html">R for Data Science</a></li>
</ul>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="26">
<li id="fn26"><p>De <code>survey</code> data die gebruikt wordt komt van de General Social Survey, en bevat algemene informatie over sociale aspecten van de Amerikaanse burgers. In het bijzonder bevat het <code>survey</code> data.frame een steekproef van categorische attributen.<a href="tutorial-data-voorbereiden.html#fnref26" class="footnote-back">↩︎</a></p></li>
<li id="fn27"><p>Het gedeelte over het lezen van gegevens moet worden gezien als achtergrondmateriaal voor als je het nodig hebt. Er wordt alleen van je verwacht dat je bekend bent met de functies en formaten die in de lessen worden besproken. Als je echter in je toekomstige (studenten)loopbaan een bepaald gegevensbestand moet importeren, kan je dit als uitgangspunt gebruiken. De inhoud van dit deel kan dus gedeeltelijk worden overgeslagen, <strong>uitgezonderd</strong> voor het deel over het converteren van variabelen.<a href="tutorial-data-voorbereiden.html#fnref27" class="footnote-back">↩︎</a></p></li>
<li id="fn28"><p>Merk op dat deze conversies niet standaard zonder gevaar zijn. Een variabele kan bijvoorbeeld alleen numeriek worden gemaakt als alle waarden ervan als numerieke waarden kunnen worden behandeld. Indien het waarden vindt die niet correct kunnen worden omgezet, zoals tekst, zal het in plaats daarvan een ontbrekende waarde invoegen (NA, voor Not Available, zoals we hieronder zullen zien). Het invoegen van NA’s zal altijd leiden tot een waarschuwing. Zo’n waarschuwing zal je meestal waarschuwen dat je iets verkeerd deed (een verkeerde variabele geconverteerd?) of dat er fouten in de gegevens zitten.<a href="tutorial-data-voorbereiden.html#fnref28" class="footnote-back">↩︎</a></p></li>
<li id="fn29"><p>De <code>count</code> functie die hier gebruikt wordt is een <code>dplyr</code> afkorting voor <code>group_by(party) %&gt;% summarize(n = n())</code>. Voel je vrij om het te gebruiken om je een hoop typewerk te besparen. Het heeft ook een sort argument om te sorteren op aflopende frequenties. Als zodanig is <code>count(party, sort = T)</code> gelijk aan <code>group_by(party) %&gt;% summarize(n = n()) %&gt;% arrange(-n)</code>. Let er echter op dat <code>count</code> de hele groepering van een data.frame achteraf verwijdert, in tegenstelling tot <code>summarize</code>.<a href="tutorial-data-voorbereiden.html#fnref29" class="footnote-back">↩︎</a></p></li>
<li id="fn30"><p>Toen we voor het eerst as.factor(party) deden, werden de niveaus in alfabetische volgorde geplaatst. Daarna hebben we echter sommige niveaus gehercodeerd, maar dit heeft de volgorde niet bijgewerkt. Zo werd “Strong Republican” nu “Republican, Strong” en “Strong Democrat” werd “Democrat, Strong,” maar beide bleven de laatste niveaus omdat ze oorspronkelijk begonnen met S. Het is niet te verwachten dat je bekend bent met alle neveneffecten van sommige transformaties, maar dit toont je de complexiteit wanneer onze acties beginnen af te hangen van eerdere acties, en hoe we echt werken in een iteratieve context.<a href="tutorial-data-voorbereiden.html#fnref30" class="footnote-back">↩︎</a></p></li>
<li id="fn31"><p>Wanneer we categorische gegevens inspecteren, kunnen we een snelle telling doen. Hoewel dit zou kunnen werken voor sommige continue variabelen, zoals jaar, is het niet geschikt voor de meeste continue variabelen, omdat ze vaak uniek zijn voor elke observatie. In plaats daarvan kijken we naar de samenvatting van de variabelen.<a href="tutorial-data-voorbereiden.html#fnref31" class="footnote-back">↩︎</a></p></li>
<li id="fn32"><p>Dergelijke fouten kunnen vaak worden vermeden door een goede gegevensverzameling, d.w.z. als je online een enquête of een gegevensformulier maakt, zorg er dan voor dat alle velden redelijk gecontroleerd zijn: leeftijd kan niet negatief zijn, een postcode bestaat uit 4 cijfers, en men heeft niet meer dan 24 uur in een dag. Hoewel er later nog dingen mis kunnen gaan, kunnen de gegevens in ieder geval niet verkeerd worden ingevoerd door de respondenten. In het echte leven gebeurt veel gegevensverzameling helaas zonder veel nadenken.<a href="tutorial-data-voorbereiden.html#fnref32" class="footnote-back">↩︎</a></p></li>
<li id="fn33"><p>Misschien ben je bekend met de <code>IF</code> functie in Excel? Het gebruik ervan is precies hetzelfde.<a href="tutorial-data-voorbereiden.html#fnref33" class="footnote-back">↩︎</a></p></li>
<li id="fn34"><p>Merk op dat we pander gebruiken om de opmaak van onze tabellen te verbeteren, en dat je daar verder geen aandacht aan moet besteden in deze tutorial.<a href="tutorial-data-voorbereiden.html#fnref34" class="footnote-back">↩︎</a></p></li>
<li id="fn35"><p>Men zou kunnen aanvoeren dat we ook de waarde “Geen antwoord” voor gemeld inkomen als NA hebben gecodeerd. In dit geval is echter besloten dat niet te doen om een duidelijk onderscheid tussen de speciale categorieën (Geweigerd, Niet van toepassing, Geen antwoord en Weet niet) te behouden.<a href="tutorial-data-voorbereiden.html#fnref35" class="footnote-back">↩︎</a></p></li>
<li id="fn36"><p>Ja, we moeten dit herhalen voor elke functie die we willen gebruiken, en nee, er is geen gemakkelijkere manier.<a href="tutorial-data-voorbereiden.html#fnref36" class="footnote-back">↩︎</a></p></li>
<li id="fn37"><p>Het grensargument is een optioneel argument om te bepalen waar het interval moet beginnen.<a href="tutorial-data-voorbereiden.html#fnref37" class="footnote-back">↩︎</a></p></li>
<li id="fn38"><p>De oplettende lezer heeft misschien een overeenkomst opgemerkt tussen <code>fct_collapse</code> en <code>fct_recode</code>. Inderdaad, je zou hetzelfde resultaat kunnen bereiken met de laatste functie, maar je zou meer typewerk hebben.<a href="tutorial-data-voorbereiden.html#fnref38" class="footnote-back">↩︎</a></p></li>
<li id="fn39"><p>In dit voorbeeld gebruiken we de scale_fill_tableau kleurenschaal uit het pakket ggthemes om een kleurenschaal te krijgen waarbij de Democraten blauw zijn en de Republikeinen rood. Verder gebruiken we fct_rev om de volgorde van de factoren om te keren. fct_rev zal zo dadelijk worden besproken.<a href="tutorial-data-voorbereiden.html#fnref39" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="lecture-notes-data-voorbereiden.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lecture-notes-tidy-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["textbook.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"depth": 3
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
